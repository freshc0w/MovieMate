(()=>{"use strict";const e="720d2150cf09bfa61e28a5042cd7468f",t="720d2150cf09bfa61e28a5042cd7468f";async function a(e){try{const a=await fetch(`https://api.themoviedb.org/3/movie/${e}?api_key=${t}&language=en-US`,{mode:"cors"}),n=await a.json(),r=n.genres.reduce(((e,t)=>[...e,t.name]),[]);return{mName:n.original_title,summary:n.overview,tagline:n.tagline,popularity:n.popularity,vote_average:n.vote_average,vote_count:n.vote_count,genres:r,video:n.video,runtime:n.runtime,poster_path:n.poster_path,backdrop_path:n.backdrop_path,release_date:n.release_date}}catch(e){alert(e)}}async function n(e){try{const a=await fetch(`https://api.themoviedb.org/3/movie/${e}/recommendations?api_key=${t}&language=en-US&page=1`,{mode:"cors"}),n=await a.json(),r={};if(n.results){let e=1;for(let t of n.results){if(r[t.original_title]={mName:t.original_title,id:t.id,poster_path:t.poster_path,backdrop_path:t.backdrop_path,release_date:t.release_date,vote_count:t.vote_count,vote_average:t.vote_average},5===e)break;e++}}return r}catch(e){alert(e)}}async function r(e){const a={};try{const r=await fetch(`https://api.themoviedb.org/3/movie/${e}/watch/providers?api_key=${t}`,{mode:"cors"}),o=await r.json();for(const e in o.results){const t=(n=e,new Intl.DisplayNames(["en"],{type:"region"}).of(n));a[t]={stream:[],rent:[],buy:[],countryCode:e};const r=(e,t)=>{e&&e.forEach((e=>{const a={provider_name:e.provider_name,provider_logo_path:e.logo_path};t.push(a)}))};r(o.results[e].flatrate,a[t].stream),r(o.results[e].rent,a[t].rent),r(o.results[e].buy,a[t].buy)}return a}catch(e){alert(e)}var n}async function o(e){try{let n;const r=await fetch(`https://api.themoviedb.org/3/movie/${e}/videos?api_key=${t}`,{mode:"cors"}),o=(await r.json()).results.filter((e=>"Trailer"===e.type));if(0===o.length)return!1;const i=o.filter((e=>{e.official}));return n=0!==i.length?i[0]:o[0],{mName:n.name,key:n.key,site:n.site,type:n.type,lang:(a=n.iso_639_1,new Intl.DisplayNames(["en"],{type:"language"}).of(a))}}catch(e){alert(e)}var a}async function i(e){try{let a=[];const n=await fetch(`https://api.themoviedb.org/3/movie/${e}/reviews?api_key=${t}&language=en-US&page=1`,{mode:"cors"}),r=await n.json();return 0!==r.results.length&&(r.results.forEach((e=>{a.push({author:e.author,rating:e.author_details.rating,pic_path:e.author_details.avatar_path,content:e.content,url:e.url,last_updated:e.updated_at})})),a.slice(0,5))}catch(e){alert(e)}}const s="720d2150cf09bfa61e28a5042cd7468f";async function c(e){try{const t=await fetch(`https://api.themoviedb.org/3/tv/${e}?api_key=${s}&language=en-US`,{mode:"cors"}),a=await t.json();console.log(a);const n=a.genres.reduce(((e,t)=>[...e,t.name]),[]);return{tName:a.original_name,tagline:a.tagline,language:a.original_language,summary:a.overview,episode_run_time:a.episode_run_time[0],origin_country:a.origin_country,vote_average:a.vote_average,vote_count:a.vote_count,status:a.status,seasons:a.seasons,number_of_seasons:a.number_of_seasons,first_air_date:a.first_air_date,last_air_date:a.last_air_date,backdrop_path:a.backdrop_path,poster_path:a.poster_path,popularity:a.popularity,genres:n}}catch(e){alert(e)}}async function l(e){try{const t=(await fetch(`https://api.themoviedb.org/3/tv/${e}/recommendations?api_key=${s}&language=en-US&page=1`,{mode:"cors"})).json(),a={};if(t.results){let e=1;for(let n of t.results){if(a[n.original_name]={tName:n.original_name,id:n.id,first_air_date:n.first_air_date,poster_path:n.poster_path,backdrop_path:n.backdrop_path,vote_average:n.vote_average,vote_count:n.vote_count},5===e)break;e++}}return a}catch{alert(err)}}async function d(e){const t={};try{const n=await fetch(`https://api.themoviedb.org/3/tv/${e}/watch/providers?api_key=${s}`,{mode:"cors"}),r=await n.json();for(const e in r.results){const n=(a=e,new Intl.DisplayNames(["en"],{type:"region"}).of(a));t[n]={stream:[],rent:[],buy:[],countryCode:e};const o=(e,t)=>{e&&e.forEach((e=>{const a={provider_name:e.provider_name,provider_logo_path:e.logo_path};t.push(a)}))};o(r.results[e].flatrate,t[n].stream),o(r.results[e].rent,t[n].rent),o(r.results[e].buy,t[n].buy)}return t}catch(e){alert(e)}var a}async function u(e){try{let a;const n=await fetch(`https://api.themoviedb.org/3/tv/${e}/videos?api_key=${s}`,{mode:"cors"}),r=(await n.json()).results.filter((e=>"Trailer"===e.type));if(0===r.length)return!1;const o=r.filter((e=>{e.official}));return a=0!==o.length?o[0]:r[0],{tName:a.name,key:a.key,site:a.site,type:a.type,lang:(t=a.iso_639_1,new Intl.DisplayNames(["en"],{type:"language"}).of(t))}}catch(e){alert(e)}var t}async function p(e){try{let t=[];const a=await fetch(`https://api.themoviedb.org/3/tv/${e}/reviews?api_key=${s}&language=en-US&page=1`,{mode:"cors"}),n=await a.json();if(0===n.results.length)return!1;let r=1;return n.results.forEach((e=>{t.push({author:e.author,rating:e.author_details.rating,pic_path:e.author_details.avatar_path,content:e.content,url:e.url,last_updated:e.updated_at}),r++})),t.slice(0,5)}catch(e){alert(e)}}const m=async(e,t)=>{const s=document.createElement("section"),m=await g(e,a,c),h=(await g(e,n,l),await g(e,r,d)),f=(await g(e,o,u),await g(e,i,p));function y(e){e&&s.appendChild(e)}function v(e,t){const a=document.createElement(e);return a.classList.add(t),a}async function g(e,a,n){return"movie"===t?await a(e):await n(e)}console.log(f);const _=e=>{const t=document.createElement("div");t.classList.add("intro"),t.appendChild(function(){const e=document.createElement("h1");return e.textContent=m.mName?m.mName:m.tName,e.classList.add("title"),e}()),m.tagline&&t.appendChild(function(){const e=document.createElement("em");return e.textContent=m.tagline,e.classList.add("tagline"),e}());const a=function(e=""){const t=document.createElement("img"),a="https://image.tmdb.org/t/p";let n;if(t.classList.add("poster"),m.poster_path)n=m.poster_path;else{if(!m.backdrop_path)return;n=m.backdrop_path}return t.src=e?`${a}/w${e}/${n}`:`${a}/original/${n}`,t.alt="Movie picture poster",t.setAttribute("loading","lazy"),t}(e);return a&&t.appendChild(a),t};return{section:s,addToSection:y,drawAll:function(){y(_())},drawIntro:_,drawSubInfos:()=>{const e=document.createElement("div");let t,a;e.classList.add("subinfo-container"),m.release_date?(t=r("Release Date:",m.release_date.split("-").reverse().join("/")),a=""):m.first_air_date?(t=r("First Aired: ",m.first_air_date.split("-").reverse().join("/")),a=r("Last Aired: ",m.last_air_date.split("-").reverse().join("/"))):t="";let n=m.runtime?function(e){const t=e/60,a=Math.floor(t),n=60*(t-a);return`${a}h ${Math.round(n)}min`}(m.runtime):"";function r(e,t){if(!t)return;const a=document.createElement("div"),n=document.createElement("span"),r=document.createElement("span");return a.classList.add("sub-info"),n.classList.add("category-name"),r.classList.add("category-info"),n.textContent=e,r.textContent=t,[n,r].forEach((e=>a.appendChild(e))),a}return[t,a,r("Show status:",m.status),r("Runtime: ",n),r("Genres: ",m.genres.join(", ")),r("Number of seasons: ",m.number_of_seasons),r("Est Avg Episode Runtime: ",m.episode_run_time),r("Country of Origin: ",m.origin_country),r("Vote Average: ",m.vote_average),r("Vote Count: ",m.vote_count),r("Popularity: ",m.popularity)].forEach((t=>t?e.appendChild(t):"")),e},drawSummary:()=>{const e=document.createElement("p");return e.textContent=m.summary,e.classList.add("summary"),e},drawProviders:()=>{let e;const t=v("div","provider-container"),a=v("button","country-btn"),n=v("div","house-provider-container");if([a,n].forEach((e=>{t.appendChild(e)})),Object.keys(h).length)if(e=!0,Object.keys(h).includes("Australia"))r("Australia"),a.textContent="Australia";else{const e=Object.keys(h)[0];r(e),a.textContent=`${e}`}else e=!1,a.textContent="No countries offer this tv/movie at the moment.";return a.addEventListener("click",(t=>{t.preventDefault(),e&&(function(e){const t=Object.keys(h);let a,n={};t.forEach((t=>{n[t]=h[t].countryCode,e===t&&(a=h[t].countryCode)}));const r=v("form","modal-country-container"),o=v("div","modal-header"),i=v("div","modal-body"),s=v("div","modal-current-country"),c=v("input","modal-input-search"),l=v("ul","modal-list-countries"),d=v("button","modal-close-btn");function u(e,t){const a=v("img","country-flag");return a.setAttribute("crossorigin","anonymous"),a.src=`https://countryflagsapi.com/png/${e}`,a.alt=`${t} flag`,a}function p(){let e,t,a,n,r,o,i;for(e=document.getElementById("modal-input-search"),t=e.value.toUpperCase(),a=document.getElementById("countries-list"),n=a.getElementsByTagName("li"),o=0;o<n.length;o++)r=n[o].getElementsByTagName("a")[0],i=r.textContent||r.innerText,i.toUpperCase().indexOf(t)>-1?n[o].style.display="":n[o].style.display="none"}(()=>{const t=document.createElement("h2");t.textContent="Countries";const n=document.createElement("h3"),r=document.createElement("label"),i={id:"modal-input-search",type:"search",placeholder:"🔍 Search for countries...",title:"Type in a country name",role:"search"};for(let e in i)c.setAttribute(e,i[e]);c.addEventListener("keyup",p),c.addEventListener("submit",(e=>{e.preventDefault()}));const l=u(a,e);n.textContent=e,s.appendChild(l),s.appendChild(n),r.htmlFor=`${c.id}`,[t,s,r,c].forEach((e=>{o.appendChild(e)}))})(),(()=>{l.id="countries-list";for(let e in n){let t=n[e];const a=v("li","country-container"),r=u(t,e),o=v("a","country-name");o.textContent=e,o.setAttribute("href","#"),[r,o].forEach((e=>{a.appendChild(e)})),l.appendChild(a)}[l].forEach((e=>{i.appendChild(e)}))})(),(e=>{const t=v("i","fa");t.classList.add("fa-close"),d.appendChild(t),e()})((()=>{d.addEventListener("click",(e=>{e.preventDefault(),document.querySelector(".modal-country-container").remove(),document.querySelector(".face-mask").style.display="none"}))})),[o,i,d].forEach((e=>r.appendChild(e))),document.querySelector("body").append(r),document.querySelector(".face-mask").style.display="block"}(a.textContent),function(e){let t,a,n,r,o;for(t=document.getElementById("countries-list"),a=t.getElementsByTagName("li"),n=0;n<a.length;n++)if(r=a[n].getElementsByTagName("a")[0],o=r.textContent||r.innerText,o===e){a[n].style.backgroundColor="rgba(25, 150, 150, 0.5)",a[n].style.transform="scale(1.025)";const e=v("i","fa");e.classList.add("fa-check"),a[n].append(e)}}(a.textContent),document.querySelectorAll(".country-container").forEach((e=>e.addEventListener("click",(t=>{if(t.preventDefault(),e.lastChild.textContent){const t=e.lastChild.textContent;n.innerHTML="",r(t)}document.querySelector(".modal-country-container").remove(),document.querySelector(".face-mask").style.display="none"})))))})),t;function r(e="Australia"){a.textContent=e;const t=h[e].stream,r=h[e].buy,o=h[e].rent,i=["Stream at:","Purchase at:","Rent at:"];let s=0;[t,r,o].forEach((e=>{const t=v("div","service-container"),a=v("div","service-name"),r=v("h2","service-name-bold"),o=v("div","provider-service-container");e.forEach((e=>{const t=v("div","provider-service"),a=v("img","provider-img"),n=v("span","provider-name");e.provider_logo_path&&(a.src=`https://image.tmdb.org/t/p/original/${e.provider_logo_path}`,a.alt=`${e.provider_name} picture.`,a.setAttribute("loading","lazy"),n.textContent=e.provider_name),[a,n].forEach((e=>{t.appendChild(e)})),o.appendChild(t)})),e.length&&(r.textContent=`${i[s]}`,a.appendChild(r)),s++,t.appendChild(a),t.appendChild(o),n.appendChild(t)}))}},drawReviews:()=>{if(!f)return;const e=v("div","review-container"),t=v("h2","review-title");return t.textContent="Reviews:",e.appendChild(t),f.forEach((t=>((e,t)=>{function a(t,a,n,r){const o=v(n,r);t&&(o.textContent=t),t===e.rating&&(o.textContent=`${t}/10`),a.appendChild(o)}t.appendChild((()=>{const t=v("div","review-heading");if(e.pic_path){const a=v("img","author-pic");"http"!==e.pic_path.slice(1,5)?a.src=`https://image.tmdb.org/t/p/w300/${e.pic_path}`:a.src=e.pic_path.slice(1),a.alt=`${e.author} profile picture.`,t.appendChild(a)}return a(e.author,t,"h3","review-author"),a(e.rating,t,"span","review-rating"),t})()),t.appendChild((()=>{const t=v("p","review-content");return t.textContent=`"${e.content}"`,t})()),t.appendChild((()=>{const t=v("div","review-footer"),a=v("a","review-link"),n=v("span","review-updated");var r;return a.setAttribute("href",`${e.url}`),a.textContent="Click for review link",n.textContent=`Last updated: ${r=e.last_updated,(r=r.split("-"))[2]=r[2].slice(0,2)+"/",r[2].concat(r.slice(0,2).reverse().join("/"))}`,t.appendChild(a),t.appendChild(n),t})())})(t,e))),e}}};async function h(t){const a=await async function(t){const a=function(e){return e.split(" ").join("+")}(t);try{const n=await fetch(`https://api.themoviedb.org/3/search/multi?api_key=${e}&language=en-US&query=${a}&page=1`,{mode:"cors"}),r=await n.json();let o={},i=r.results.sort(((e,t)=>e.popularity<t.popularity?1:e.popularity>t.popularity?-1:0));if(i.length){for(let e=0;e<i.length;e++)o[i[e].id]=i[e].media_type;return console.log(o),o}return void alert(`No results found for ${t}`)}catch(e){alert(e)}}(t),n=document.querySelector(".main-container");let r=[];for(let e in a)r.push([e,a[e]]);async function o(e,t){const a=await m(e,t);return a.addToSection(a.drawIntro("300")),a.addToSection(a.drawSubInfos()),a.addToSection(a.drawSummary()),a.addToSection(a.drawProviders()),a.addToSection(a.drawReviews()),n.appendChild(a.section),o}r.forEach((async e=>await o(e[0],e[1])))}console.log("Hello World"),async function(){document.querySelector(".search-query").addEventListener("click",(async e=>{e.preventDefault();const t=document.getElementById("input-search").value.split(" ").join("+");t?(document.querySelector(".main-container").innerHTML="",await h(t),document.querySelector(".search-query").value=""):alert("Please enter a valid movie/tv show")}))}(),h("Game of Thrones")})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFTMUssTUFBTzJLLElBQzFDQSxFQUFFQyxpQkFDRixNQUFNMEYsRUFDTDlKLFNBQVMwRixlQUFlLGdCQUFnQkMsTUFjOUJ0RCxNQUFNLEtBQUtFLEtBQUssS0FadEJ1SCxHRndCTzlKLFNBQVNtSCxjQUFjLG1CQUMvQlksVUFBWSxTRXBCVjZCLEVBQWFFLEdBRW5COUosU0FBU21ILGNBQWMsaUJBQWlCeEIsTUFBUSxJQU4vQ3hLLE1BQU0scUNBTTJDLEdBRXBELENEUUFzUCxHQUVBYixFQUFhLGtCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbW92aWVtYXRlLy4vc3JjL2pzL2FwaUZ1bmN0aW9ucy9mZXRjaElkLmpzIiwid2VicGFjazovL21vdmllbWF0ZS8uL3NyYy9qcy9hcGlGdW5jdGlvbnMvZmV0Y2hNb3ZpZUluZm8uanMiLCJ3ZWJwYWNrOi8vbW92aWVtYXRlLy4vc3JjL2pzL2FwaUZ1bmN0aW9ucy9mZXRjaFR2SW5mby5qcyIsIndlYnBhY2s6Ly9tb3ZpZW1hdGUvLi9zcmMvanMvRE9NRnVuY3Rpb25zL2RyYXdTZWN0aW9uLmpzIiwid2VicGFjazovL21vdmllbWF0ZS8uL3NyYy9qcy9ET01GdW5jdGlvbnMvZHJhd1NlY3Rpb25zLmpzIiwid2VicGFjazovL21vdmllbWF0ZS8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly9tb3ZpZW1hdGUvLi9zcmMvanMvVUkvc3VibWl0U2VhcmNoLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IEFQSV9LRVkgPSBcIjcyMGQyMTUwY2YwOWJmYTYxZTI4YTUwNDJjZDc0NjhmXCI7XG4vKlxuRmV0Y2hlcyB0aGUgdGhlIGZpcnN0IHBhZ2Ugb2YgdGhlIG1vdmllL3Nob3cgaWRzIGFuZCByZXR1cm4gaXQgaW4gYW4gYXJyYXkuXG4qL1xuYXN5bmMgZnVuY3Rpb24gZmV0Y2hJZHMobmFtZSkge1xuXHRjb25zdCBxdWVyeSA9IGludGVycHJldFRvUXVlcnkobmFtZSk7XG5cdHRyeSB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcblx0XHRcdGBodHRwczovL2FwaS50aGVtb3ZpZWRiLm9yZy8zL3NlYXJjaC9tdWx0aT9hcGlfa2V5PSR7QVBJX0tFWX0mbGFuZ3VhZ2U9ZW4tVVMmcXVlcnk9JHtxdWVyeX0mcGFnZT0xYCxcblx0XHRcdHsgbW9kZTogXCJjb3JzXCIgfVxuXHRcdCk7XG5cdFx0Y29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblx0XHRsZXQgaWRzID0ge307XG5cdFx0Ly8gbGV0IHJlc3VsdCA9IGRhdGEucmVzdWx0cztcblx0XHRsZXQgcmVzdWx0ID0gZGF0YS5yZXN1bHRzLnNvcnQoKHAxLCBwMikgPT5cblx0XHRcdHAxLnBvcHVsYXJpdHkgPCBwMi5wb3B1bGFyaXR5ID8gMSA6IHAxLnBvcHVsYXJpdHkgPiBwMi5wb3B1bGFyaXR5ID8gLTEgOiAwXG5cdFx0KTsgLy8gU29ydCBieSBwb3B1bGFyaXR5LlxuXG5cdFx0aWYgKHJlc3VsdC5sZW5ndGgpIHtcblx0XHRcdC8vIGlmIChyZXN1bHQubGVuZ3RoID4gNCkge1xuXHRcdFx0Ly8gXHRmb3IgKGxldCBpID0gMDsgaSA8IDU7IGkrKykge1xuXHRcdFx0Ly8gXHRcdGlkc1tyZXN1bHRbaV0uaWRdID0gcmVzdWx0W2ldLm1lZGlhX3R5cGU7XG5cdFx0XHQvLyBcdH1cblx0XHRcdC8vIH0gZWxzZSB7XG5cdFx0XHQvLyBcdGZvciAobGV0IGkgPSAwOyBpIDwgcmVzdWx0Lmxlbmd0aDsgaSsrKSB7XG5cdFx0XHQvLyBcdFx0aWRzW3Jlc3VsdFtpXS5pZF0gPSByZXN1bHRbaV0ubWVkaWFfdHlwZTtcblx0XHRcdC8vIFx0fVxuXHRcdFx0Ly8gfVxuXHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCByZXN1bHQubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0aWRzW3Jlc3VsdFtpXS5pZF0gPSByZXN1bHRbaV0ubWVkaWFfdHlwZTtcblx0XHRcdH1cblx0XHRcdGNvbnNvbGUubG9nKGlkcyk7XG5cdFx0XHRyZXR1cm4gaWRzO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRhbGVydChgTm8gcmVzdWx0cyBmb3VuZCBmb3IgJHtuYW1lfWApO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0YWxlcnQoZXJyKTtcblx0fVxufVxuXG5mdW5jdGlvbiBpbnRlcnByZXRUb1F1ZXJ5KG5hbWUpIHtcblx0cmV0dXJuIG5hbWUuc3BsaXQoXCIgXCIpLmpvaW4oXCIrXCIpO1xufVxuXG5leHBvcnQgeyBmZXRjaElkcyB9O1xuIiwiY29uc3QgQVBJX0tFWSA9IFwiNzIwZDIxNTBjZjA5YmZhNjFlMjhhNTA0MmNkNzQ2OGZcIjtcblxuYXN5bmMgZnVuY3Rpb24gZmV0Y2hNb3ZpZURldGFpbHMobW92aWVfaWQpIHtcblx0dHJ5IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFxuXHRcdFx0YGh0dHBzOi8vYXBpLnRoZW1vdmllZGIub3JnLzMvbW92aWUvJHttb3ZpZV9pZH0/YXBpX2tleT0ke0FQSV9LRVl9Jmxhbmd1YWdlPWVuLVVTYCxcblx0XHRcdHsgbW9kZTogXCJjb3JzXCIgfVxuXHRcdCk7XG5cdFx0Y29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuXHRcdGNvbnN0IGdlbnJlcyA9IGRhdGEuZ2VucmVzLnJlZHVjZSgoYWNjLCB2YWwpID0+IFsuLi5hY2MsIHZhbC5uYW1lXSwgW10pO1xuXG5cdFx0Y29uc3QgZ2VuZXJhbEluZm8gPSB7XG5cdFx0XHRtTmFtZTogZGF0YS5vcmlnaW5hbF90aXRsZSxcblx0XHRcdHN1bW1hcnk6IGRhdGEub3ZlcnZpZXcsXG5cdFx0XHR0YWdsaW5lOiBkYXRhLnRhZ2xpbmUsXG5cdFx0XHRwb3B1bGFyaXR5OiBkYXRhLnBvcHVsYXJpdHksXG5cdFx0XHR2b3RlX2F2ZXJhZ2U6IGRhdGEudm90ZV9hdmVyYWdlLFxuXHRcdFx0dm90ZV9jb3VudDogZGF0YS52b3RlX2NvdW50LFxuXHRcdFx0Z2VucmVzOiBnZW5yZXMsXG5cdFx0XHR2aWRlbzogZGF0YS52aWRlbyxcblx0XHRcdHJ1bnRpbWU6IGRhdGEucnVudGltZSxcblx0XHRcdHBvc3Rlcl9wYXRoOiBkYXRhLnBvc3Rlcl9wYXRoLFxuXHRcdFx0YmFja2Ryb3BfcGF0aDogZGF0YS5iYWNrZHJvcF9wYXRoLFxuXHRcdFx0cmVsZWFzZV9kYXRlOiBkYXRhLnJlbGVhc2VfZGF0ZSxcblx0XHR9O1xuXHRcdHJldHVybiBnZW5lcmFsSW5mbztcblx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0YWxlcnQoZXJyKTtcblx0fVxufVxuXG4vKlxuUmV0dXJucyBhbiBhcnJheSBvZiByZWNvbW1lbmRlZCBtb3ZpZXMgd2l0aCB0aGVpciBuYW1lLCBpZCwgcG9zdGVyX3BhdGggYW5kXG5iYWNrZHJvcF9wYXRoIHJlY29yZGVkLiBcbklmIG5vIG1vdmllcyBhcmUgcmVjb21tZW5kZWQsIHJldHVybiBudWxsO1xuKi9cbmFzeW5jIGZ1bmN0aW9uIGZldGNoTW92aWVSZWNjb3MobW92aWVfaWQpIHtcblx0dHJ5IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFxuXHRcdFx0YGh0dHBzOi8vYXBpLnRoZW1vdmllZGIub3JnLzMvbW92aWUvJHttb3ZpZV9pZH0vcmVjb21tZW5kYXRpb25zP2FwaV9rZXk9JHtBUElfS0VZfSZsYW5ndWFnZT1lbi1VUyZwYWdlPTFgLFxuXHRcdFx0eyBtb2RlOiBcImNvcnNcIiB9XG5cdFx0KTtcblx0XHRjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG5cdFx0Y29uc3QgcmVjTW92aWVzID0ge307XG5cdFx0aWYgKGRhdGEucmVzdWx0cykge1xuXHRcdFx0bGV0IGNvdW50ID0gMTtcblx0XHRcdGZvciAobGV0IG1vdmllIG9mIGRhdGEucmVzdWx0cykge1xuXHRcdFx0XHRyZWNNb3ZpZXNbbW92aWUub3JpZ2luYWxfdGl0bGVdID0ge1xuXHRcdFx0XHRcdG1OYW1lOiBtb3ZpZS5vcmlnaW5hbF90aXRsZSxcblx0XHRcdFx0XHRpZDogbW92aWUuaWQsXG5cdFx0XHRcdFx0cG9zdGVyX3BhdGg6IG1vdmllLnBvc3Rlcl9wYXRoLFxuXHRcdFx0XHRcdGJhY2tkcm9wX3BhdGg6IG1vdmllLmJhY2tkcm9wX3BhdGgsXG5cdFx0XHRcdFx0cmVsZWFzZV9kYXRlOiBtb3ZpZS5yZWxlYXNlX2RhdGUsXG5cdFx0XHRcdFx0dm90ZV9jb3VudDogbW92aWUudm90ZV9jb3VudCxcblx0XHRcdFx0XHR2b3RlX2F2ZXJhZ2U6IG1vdmllLnZvdGVfYXZlcmFnZSxcblx0XHRcdFx0fTtcblx0XHRcdFx0aWYgKGNvdW50ID09PSA1KSB7XG5cdFx0XHRcdFx0Ly8gTWF4IDUgbW92aWVzIHRvIGJlIHJlY29tbWVuZGVkXG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblx0XHRcdFx0Y291bnQrKztcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIHJlY01vdmllcztcblx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0YWxlcnQoZXJyKTtcblx0fVxufVxuXG4vKlxuUmV0dXJucyBhbiBvYmplY3Qgd2l0aCBjb3VudHJpZXMgYW5kIHRoZSBhdmFpbGFibGUgc3RyZWFtaW5nIHNlcnZpY2VzLCBidXlcbm9yIHJlbnQgaXQgY29tZXMgd2l0aCBFQUNIIGluZGl2aWR1YWwgY291bnRyeS5cbiovXG5hc3luYyBmdW5jdGlvbiBmZXRjaE1vdmllUHJvdmlkZXJzKG1vdmllX2lkKSB7XG5cdGNvbnN0IHByb3ZpZGVyc0J5Q291bnRyeSA9IHt9O1xuXHR0cnkge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXG5cdFx0XHRgaHR0cHM6Ly9hcGkudGhlbW92aWVkYi5vcmcvMy9tb3ZpZS8ke21vdmllX2lkfS93YXRjaC9wcm92aWRlcnM/YXBpX2tleT0ke0FQSV9LRVl9YCxcblx0XHRcdHsgbW9kZTogXCJjb3JzXCIgfVxuXHRcdCk7XG5cdFx0Y29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuXHRcdGZvciAoY29uc3QgY291bnRyeUNvZGUgaW4gZGF0YS5yZXN1bHRzKSB7XG5cdFx0XHRjb25zdCBjb3VudHJ5ID0gZ2V0Q291bnRyeU5hbWUoY291bnRyeUNvZGUpO1xuXHRcdFx0cHJvdmlkZXJzQnlDb3VudHJ5W2NvdW50cnldID0ge1xuXHRcdFx0XHRzdHJlYW06IFtdLFxuXHRcdFx0XHRyZW50OiBbXSxcblx0XHRcdFx0YnV5OiBbXSxcblx0XHRcdFx0Y291bnRyeUNvZGU6IGNvdW50cnlDb2RlLFxuXHRcdFx0fTtcblxuXHRcdFx0Lypcblx0XHRcdFNvcnRzIHByb3ZpZGVycyBiYXNlZCBvbiBjb3VudHJ5IGFuZCBzZXJ2aWNlcyB0aGV5IHByb3ZpZGUuXG5cblx0XHRcdFRha2VzIGluIHR5cGUgb2Ygc2VydmljZXMgYXMgcGFyYW0gPT4gW1wiZmxhdHJhdGUgKHN0cmVhbWluZylcIiwgXG5cdFx0XHRcInJlbnRcIiwgXCJidXlcIl0gYW5kIGFuIGFycmF5IHRvIGFwcGVuZCBpdCB0by5cblx0XHRcdCovXG5cdFx0XHRjb25zdCBzb3J0UHJvdmlkZXJzID0gKHNlcnZpY2VzLCBjb2xsZWN0aW9uKSA9PiB7XG5cdFx0XHRcdGlmIChzZXJ2aWNlcykge1xuXHRcdFx0XHRcdHNlcnZpY2VzLmZvckVhY2goKHNlcnZpY2UpID0+IHtcblx0XHRcdFx0XHRcdGNvbnN0IHByb3ZpZGVySW5mbyA9IHtcblx0XHRcdFx0XHRcdFx0cHJvdmlkZXJfbmFtZTogc2VydmljZS5wcm92aWRlcl9uYW1lLFxuXHRcdFx0XHRcdFx0XHRwcm92aWRlcl9sb2dvX3BhdGg6IHNlcnZpY2UubG9nb19wYXRoLFxuXHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdGNvbGxlY3Rpb24ucHVzaChwcm92aWRlckluZm8pO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXG5cdFx0XHQvLyBBZGQgc3RyZWFtaW5nIHNlcnZpY2VzIGZvciBzcGVjaWZpZWQgbW92aWUgaW4gZWFjaCBjb3VudHJ5LlxuXHRcdFx0c29ydFByb3ZpZGVycyhcblx0XHRcdFx0ZGF0YS5yZXN1bHRzW2NvdW50cnlDb2RlXS5mbGF0cmF0ZSxcblx0XHRcdFx0cHJvdmlkZXJzQnlDb3VudHJ5W2NvdW50cnldLnN0cmVhbVxuXHRcdFx0KTtcblxuXHRcdFx0Ly8gQWRkIHJlbnRpbmcgc2VydmljZXMgZm9yIHNwZWljaWZpZWQgbW92aWUgaW4gZWFjaCBjb3VudHJ5LlxuXHRcdFx0c29ydFByb3ZpZGVycyhcblx0XHRcdFx0ZGF0YS5yZXN1bHRzW2NvdW50cnlDb2RlXS5yZW50LFxuXHRcdFx0XHRwcm92aWRlcnNCeUNvdW50cnlbY291bnRyeV0ucmVudFxuXHRcdFx0KTtcblxuXHRcdFx0Ly8gQWRkIGJ1eWluZyBzZXJ2aWNlcyBmb3Igc3BlY2lmaWVkIG1vdmllIGluIGVhY2ggY291bnRyeS5cblx0XHRcdHNvcnRQcm92aWRlcnMoXG5cdFx0XHRcdGRhdGEucmVzdWx0c1tjb3VudHJ5Q29kZV0uYnV5LFxuXHRcdFx0XHRwcm92aWRlcnNCeUNvdW50cnlbY291bnRyeV0uYnV5XG5cdFx0XHQpO1xuXHRcdH1cblx0XHRyZXR1cm4gcHJvdmlkZXJzQnlDb3VudHJ5O1xuXHR9IGNhdGNoIChlcnIpIHtcblx0XHRhbGVydChlcnIpO1xuXHR9XG59XG5cbi8vIEZpbmQgbW92aWUgdHJhaWxlciBhbmQgcmV0dXJuIGZhbHNlIGlmIG5vbmUgY2FuIGJlIGZvdW5kLlxuLy8gT2ZmaWNpYWwgdHJhaWxlciB3aWxsIGJlIHByaW9yaXRpc2VkLlxuYXN5bmMgZnVuY3Rpb24gZmV0Y2hNb3ZpZVRyYWlsZXIobW92aWVfaWQpIHtcblx0dHJ5IHtcblx0XHRsZXQgbW92aWVUcmFpbGVyO1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXG5cdFx0XHRgaHR0cHM6Ly9hcGkudGhlbW92aWVkYi5vcmcvMy9tb3ZpZS8ke21vdmllX2lkfS92aWRlb3M/YXBpX2tleT0ke0FQSV9LRVl9YCxcblx0XHRcdHsgbW9kZTogXCJjb3JzXCIgfVxuXHRcdCk7XG5cdFx0Y29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuXHRcdGNvbnN0IHRyYWlsZXJzID0gZGF0YS5yZXN1bHRzLmZpbHRlcigodmlkZW8pID0+IHZpZGVvLnR5cGUgPT09IFwiVHJhaWxlclwiKTtcblxuXHRcdGlmICh0cmFpbGVycy5sZW5ndGggPT09IDApIHJldHVybiBmYWxzZTtcblx0XHQvLyBGaW5kIG9mZmljaWFsIHRyYWlsZXIuXG5cdFx0Y29uc3Qgb2ZmaWNpYWwgPSB0cmFpbGVycy5maWx0ZXIoKHZpZGVvKSA9PiB7XG5cdFx0XHR2aWRlby5vZmZpY2lhbCA9PT0gdHJ1ZTtcblx0XHR9KTtcblxuXHRcdG9mZmljaWFsLmxlbmd0aCAhPT0gMFxuXHRcdFx0PyAobW92aWVUcmFpbGVyID0gb2ZmaWNpYWxbMF0pXG5cdFx0XHQ6IChtb3ZpZVRyYWlsZXIgPSB0cmFpbGVyc1swXSk7XG5cblx0XHRyZXR1cm4ge1xuXHRcdFx0bU5hbWU6IG1vdmllVHJhaWxlci5uYW1lLFxuXHRcdFx0a2V5OiBtb3ZpZVRyYWlsZXIua2V5LFxuXHRcdFx0c2l0ZTogbW92aWVUcmFpbGVyLnNpdGUsXG5cdFx0XHR0eXBlOiBtb3ZpZVRyYWlsZXIudHlwZSxcblx0XHRcdGxhbmc6IGdldExhbmd1YWdlKG1vdmllVHJhaWxlci5pc29fNjM5XzEpLFxuXHRcdH07XG5cdH0gY2F0Y2ggKGVycikge1xuXHRcdGFsZXJ0KGVycik7XG5cdH1cbn1cblxuLy8gUmV0dXJucyBhbiBhcnIgb2YgYSBtYXhpbXVtIG9mIDUgcmV2aWV3cyBiYXNlZCBvbiB0aGUgbW92aWUgZnJvbSByYW5kb20gc291cmNlcy5cbi8vIElmIG5vIHJldmlld3MgYXJlIGZvdW5kLCB0aGlzIGZuYyByZXR1cm5zIGZhbHNlLlxuYXN5bmMgZnVuY3Rpb24gZmV0Y2hNb3ZpZVJldmlld3MobW92aWVfaWQpIHtcblx0dHJ5IHtcblx0XHRsZXQgcmV2aWV3cyA9IFtdO1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXG5cdFx0XHRgaHR0cHM6Ly9hcGkudGhlbW92aWVkYi5vcmcvMy9tb3ZpZS8ke21vdmllX2lkfS9yZXZpZXdzP2FwaV9rZXk9JHtBUElfS0VZfSZsYW5ndWFnZT1lbi1VUyZwYWdlPTFgLFxuXHRcdFx0eyBtb2RlOiBcImNvcnNcIiB9XG5cdFx0KTtcblx0XHRjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXHRcdGlmIChkYXRhLnJlc3VsdHMubGVuZ3RoID09PSAwKSByZXR1cm4gZmFsc2U7XG5cblx0XHRkYXRhLnJlc3VsdHMuZm9yRWFjaCgocmV2aWV3KSA9PiB7XG5cdFx0XHRyZXZpZXdzLnB1c2goe1xuXHRcdFx0XHRhdXRob3I6IHJldmlldy5hdXRob3IsXG5cdFx0XHRcdHJhdGluZzogcmV2aWV3LmF1dGhvcl9kZXRhaWxzLnJhdGluZyxcblx0XHRcdFx0cGljX3BhdGg6IHJldmlldy5hdXRob3JfZGV0YWlscy5hdmF0YXJfcGF0aCxcblx0XHRcdFx0Y29udGVudDogcmV2aWV3LmNvbnRlbnQsXG5cdFx0XHRcdHVybDogcmV2aWV3LnVybCxcblx0XHRcdFx0bGFzdF91cGRhdGVkOiByZXZpZXcudXBkYXRlZF9hdCxcblx0XHRcdH0pO1xuXHRcdH0pO1xuXHRcdHJldHVybiByZXZpZXdzLnNsaWNlKDAsIDUpOyAvLyBGaXJzdCA1IHJldmlld3MgcmV0dXJuZWRcblx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0YWxlcnQoZXJyKTtcblx0fVxufVxuXG4vLyBIZWxwZXIgZm5jc1xuZnVuY3Rpb24gZ2V0Q291bnRyeU5hbWUoY29kZSkge1xuXHRsZXQgcmVnaW9uTmFtZXMgPSBuZXcgSW50bC5EaXNwbGF5TmFtZXMoW1wiZW5cIl0sIHsgdHlwZTogXCJyZWdpb25cIiB9KTtcblx0cmV0dXJuIHJlZ2lvbk5hbWVzLm9mKGNvZGUpO1xufVxuXG5mdW5jdGlvbiBnZXRMYW5ndWFnZShjb2RlKSB7XG5cdGNvbnN0IGxhbmcgPSBuZXcgSW50bC5EaXNwbGF5TmFtZXMoW1wiZW5cIl0sIHsgdHlwZTogXCJsYW5ndWFnZVwiIH0pO1xuXHRyZXR1cm4gbGFuZy5vZihjb2RlKTtcbn1cbmV4cG9ydCB7XG5cdGZldGNoTW92aWVEZXRhaWxzLFxuXHRmZXRjaE1vdmllUmVjY29zLFxuXHRmZXRjaE1vdmllUHJvdmlkZXJzLFxuXHRmZXRjaE1vdmllVHJhaWxlcixcblx0ZmV0Y2hNb3ZpZVJldmlld3MsXG5cdGdldENvdW50cnlOYW1lLFxufTtcbiIsImNvbnN0IEFQSV9LRVkgPSBcIjcyMGQyMTUwY2YwOWJmYTYxZTI4YTUwNDJjZDc0NjhmXCI7XG5cbmFzeW5jIGZ1bmN0aW9uIGZldGNoVHZEZXRhaWxzKHR2X2lkKSB7XG5cdHRyeSB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcblx0XHRcdGBodHRwczovL2FwaS50aGVtb3ZpZWRiLm9yZy8zL3R2LyR7dHZfaWR9P2FwaV9rZXk9JHtBUElfS0VZfSZsYW5ndWFnZT1lbi1VU2AsXG5cdFx0XHR7IG1vZGU6IFwiY29yc1wiIH1cblx0XHQpO1xuXHRcdGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cdFx0Y29uc29sZS5sb2coZGF0YSk7XG5cblx0XHRjb25zdCBnZW5yZXMgPSBkYXRhLmdlbnJlcy5yZWR1Y2UoKGFjYywgdmFsKSA9PiBbLi4uYWNjLCB2YWwubmFtZV0sIFtdKTtcblxuXHRcdGNvbnN0IGdlbmVyYWxJbmZvID0ge1xuXHRcdFx0dE5hbWU6IGRhdGEub3JpZ2luYWxfbmFtZSxcblx0XHRcdHRhZ2xpbmU6IGRhdGEudGFnbGluZSxcblx0XHRcdGxhbmd1YWdlOiBkYXRhLm9yaWdpbmFsX2xhbmd1YWdlLFxuXHRcdFx0c3VtbWFyeTogZGF0YS5vdmVydmlldyxcblx0XHRcdGVwaXNvZGVfcnVuX3RpbWU6IGRhdGEuZXBpc29kZV9ydW5fdGltZVswXSxcblx0XHRcdG9yaWdpbl9jb3VudHJ5OiBkYXRhLm9yaWdpbl9jb3VudHJ5LFxuXHRcdFx0dm90ZV9hdmVyYWdlOiBkYXRhLnZvdGVfYXZlcmFnZSxcblx0XHRcdHZvdGVfY291bnQ6IGRhdGEudm90ZV9jb3VudCxcblx0XHRcdHN0YXR1czogZGF0YS5zdGF0dXMsXG5cdFx0XHRzZWFzb25zOiBkYXRhLnNlYXNvbnMsXG5cdFx0XHRudW1iZXJfb2Zfc2Vhc29uczogZGF0YS5udW1iZXJfb2Zfc2Vhc29ucyxcblx0XHRcdGZpcnN0X2Fpcl9kYXRlOiBkYXRhLmZpcnN0X2Fpcl9kYXRlLFxuXHRcdFx0bGFzdF9haXJfZGF0ZTogZGF0YS5sYXN0X2Fpcl9kYXRlLFxuXHRcdFx0YmFja2Ryb3BfcGF0aDogZGF0YS5iYWNrZHJvcF9wYXRoLFxuXHRcdFx0cG9zdGVyX3BhdGg6IGRhdGEucG9zdGVyX3BhdGgsXG5cdFx0XHRwb3B1bGFyaXR5OiBkYXRhLnBvcHVsYXJpdHksXG5cdFx0XHRnZW5yZXM6IGdlbnJlcyxcblx0XHR9O1xuXHRcdHJldHVybiBnZW5lcmFsSW5mbztcblx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0YWxlcnQoZXJyKTtcblx0fVxufVxuXG4vKlxuUmV0dXJucyBhbiBhcnJheSBvZiByZWNvbW1lbmRlZCB0diBzaG93cyB3aXRoIHRoZWlyIG5hbWUsIGlkLCBwb3N0ZXJfcGF0aCBhbmRcbmJhY2tkcm9wX3BhdGggcmVjb3JkZWQuIFxuSWYgbm8gbW92aWVzIGFyZSByZWNvbW1lbmRlZCwgcmV0dXJuIG51bGw7XG4qL1xuYXN5bmMgZnVuY3Rpb24gZmV0Y2hUdlJlY2Nvcyh0dl9pZCkge1xuXHR0cnkge1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXG5cdFx0XHRgaHR0cHM6Ly9hcGkudGhlbW92aWVkYi5vcmcvMy90di8ke3R2X2lkfS9yZWNvbW1lbmRhdGlvbnM/YXBpX2tleT0ke0FQSV9LRVl9Jmxhbmd1YWdlPWVuLVVTJnBhZ2U9MWAsXG5cdFx0XHR7IG1vZGU6IFwiY29yc1wiIH1cblx0XHQpO1xuXHRcdGNvbnN0IGRhdGEgPSByZXNwb25zZS5qc29uKCk7XG5cblx0XHRjb25zdCByZWNUdnMgPSB7fTtcblx0XHRpZiAoZGF0YS5yZXN1bHRzKSB7XG5cdFx0XHRsZXQgY291bnQgPSAxO1xuXHRcdFx0Zm9yIChsZXQgdHYgb2YgZGF0YS5yZXN1bHRzKSB7XG5cdFx0XHRcdHJlY1R2c1t0di5vcmlnaW5hbF9uYW1lXSA9IHtcblx0XHRcdFx0XHR0TmFtZTogdHYub3JpZ2luYWxfbmFtZSxcblx0XHRcdFx0XHRpZDogdHYuaWQsXG5cdFx0XHRcdFx0Zmlyc3RfYWlyX2RhdGU6IHR2LmZpcnN0X2Fpcl9kYXRlLFxuXHRcdFx0XHRcdHBvc3Rlcl9wYXRoOiB0di5wb3N0ZXJfcGF0aCxcblx0XHRcdFx0XHRiYWNrZHJvcF9wYXRoOiB0di5iYWNrZHJvcF9wYXRoLFxuXHRcdFx0XHRcdHZvdGVfYXZlcmFnZTogdHYudm90ZV9hdmVyYWdlLFxuXHRcdFx0XHRcdHZvdGVfY291bnQ6IHR2LnZvdGVfY291bnQsXG5cdFx0XHRcdH07XG5cdFx0XHRcdGlmIChjb3VudCA9PT0gNSkge1xuXHRcdFx0XHRcdC8vIG1heCA1IHR2IHNob3dzIHRvIGJlIHJlY29tbWVuZGVkLlxuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGNvdW50Kys7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiByZWNUdnM7XG5cdH0gY2F0Y2gge1xuXHRcdGFsZXJ0KGVycik7XG5cdH1cbn1cblxuLyogXG5SZXR1cm5zIGFuIG9iaiB3aXRoIGNvdW50cmllcyBhbmQgYXZhaWxhYmxlIHN0cmVhbWluZyBzZXJ2aWNlcywgYnV5IG9yIHJlbnRcbmZvciBzcGVjaWZpZWQgdHYgc2hvdyBpbiBFQUNIIGNvdW50cnkuXG4qL1xuYXN5bmMgZnVuY3Rpb24gZmV0Y2hUdlByb3ZpZGVycyh0dl9pZCkge1xuXHRjb25zdCBwcm92aWRlcnNCeUNvdW50cnkgPSB7fTtcblx0dHJ5IHtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFxuXHRcdFx0YGh0dHBzOi8vYXBpLnRoZW1vdmllZGIub3JnLzMvdHYvJHt0dl9pZH0vd2F0Y2gvcHJvdmlkZXJzP2FwaV9rZXk9JHtBUElfS0VZfWAsXG5cdFx0XHR7IG1vZGU6IFwiY29yc1wiIH1cblx0XHQpO1xuXHRcdGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cblx0XHRmb3IgKGNvbnN0IGNvdW50cnlDb2RlIGluIGRhdGEucmVzdWx0cykge1xuXHRcdFx0Y29uc3QgY291bnRyeSA9IGdldENvdW50cnlOYW1lKGNvdW50cnlDb2RlKTtcblx0XHRcdHByb3ZpZGVyc0J5Q291bnRyeVtjb3VudHJ5XSA9IHtcblx0XHRcdFx0c3RyZWFtOiBbXSxcblx0XHRcdFx0cmVudDogW10sXG5cdFx0XHRcdGJ1eTogW10sXG5cdFx0XHRcdGNvdW50cnlDb2RlOiBjb3VudHJ5Q29kZSxcblx0XHRcdH07XG5cblx0XHRcdC8qXG5cdFx0XHRTb3J0cyBwcm92aWRlcnMgYmFzZWQgb24gY291bnRyeSBhbmQgc2VydmljZXMgdGhleSBwcm92aWRlLlxuXG5cdFx0XHRUYWtlcyBpbiB0eXBlIG9mIHNlcnZpY2VzIGFzIHBhcmFtID0+IFtcImZsYXRyYXRlIChzdHJlYW1pbmcpXCIsIFxuXHRcdFx0XCJyZW50XCIsIFwiYnV5XCJdIGFuZCBhbiBhcnJheSB0byBhcHBlbmQgaXQgdG8uXG5cdFx0XHQqL1xuXHRcdFx0Y29uc3Qgc29ydFByb3ZpZGVycyA9IChzZXJ2aWNlcywgY29sbGVjdGlvbikgPT4ge1xuXHRcdFx0XHRpZiAoc2VydmljZXMpIHtcblx0XHRcdFx0XHRzZXJ2aWNlcy5mb3JFYWNoKChzZXJ2aWNlKSA9PiB7XG5cdFx0XHRcdFx0XHRjb25zdCBwcm92aWRlckluZm8gPSB7XG5cdFx0XHRcdFx0XHRcdHByb3ZpZGVyX25hbWU6IHNlcnZpY2UucHJvdmlkZXJfbmFtZSxcblx0XHRcdFx0XHRcdFx0cHJvdmlkZXJfbG9nb19wYXRoOiBzZXJ2aWNlLmxvZ29fcGF0aCxcblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRjb2xsZWN0aW9uLnB1c2gocHJvdmlkZXJJbmZvKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblxuXHRcdFx0Ly8gQWRkIHN0cmVhbWluZyBzZXJ2aWNlcyBmb3Igc3BlY2lmaWVkIG1vdmllIGluIGVhY2ggY291bnRyeS5cblx0XHRcdHNvcnRQcm92aWRlcnMoXG5cdFx0XHRcdGRhdGEucmVzdWx0c1tjb3VudHJ5Q29kZV0uZmxhdHJhdGUsXG5cdFx0XHRcdHByb3ZpZGVyc0J5Q291bnRyeVtjb3VudHJ5XS5zdHJlYW1cblx0XHRcdCk7XG5cblx0XHRcdC8vIEFkZCByZW50aW5nIHNlcnZpY2VzIGZvciBzcGVpY2lmaWVkIG1vdmllIGluIGVhY2ggY291bnRyeS5cblx0XHRcdHNvcnRQcm92aWRlcnMoXG5cdFx0XHRcdGRhdGEucmVzdWx0c1tjb3VudHJ5Q29kZV0ucmVudCxcblx0XHRcdFx0cHJvdmlkZXJzQnlDb3VudHJ5W2NvdW50cnldLnJlbnRcblx0XHRcdCk7XG5cblx0XHRcdC8vIEFkZCBidXlpbmcgc2VydmljZXMgZm9yIHNwZWNpZmllZCBtb3ZpZSBpbiBlYWNoIGNvdW50cnkuXG5cdFx0XHRzb3J0UHJvdmlkZXJzKFxuXHRcdFx0XHRkYXRhLnJlc3VsdHNbY291bnRyeUNvZGVdLmJ1eSxcblx0XHRcdFx0cHJvdmlkZXJzQnlDb3VudHJ5W2NvdW50cnldLmJ1eVxuXHRcdFx0KTtcblx0XHR9XG5cdFx0cmV0dXJuIHByb3ZpZGVyc0J5Q291bnRyeTtcblx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0YWxlcnQoZXJyKTtcblx0fVxufVxuXG4vLyBGaW5kIHR2IHRyYWlsZXJcbmFzeW5jIGZ1bmN0aW9uIGZldGNoVHZUcmFpbGVyKHR2X2lkKSB7XG5cdHRyeSB7XG5cdFx0bGV0IG1vdmllVHJhaWxlcjtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFxuXHRcdFx0YGh0dHBzOi8vYXBpLnRoZW1vdmllZGIub3JnLzMvdHYvJHt0dl9pZH0vdmlkZW9zP2FwaV9rZXk9JHtBUElfS0VZfWAsXG5cdFx0XHR7IG1vZGU6IFwiY29yc1wiIH1cblx0XHQpO1xuXHRcdGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cblx0XHRjb25zdCB0cmFpbGVycyA9IGRhdGEucmVzdWx0cy5maWx0ZXIoKHZpZGVvKSA9PiB2aWRlby50eXBlID09PSBcIlRyYWlsZXJcIik7XG5cblx0XHRpZiAodHJhaWxlcnMubGVuZ3RoID09PSAwKSByZXR1cm4gZmFsc2U7XG5cdFx0Ly8gRmluZCBvZmZpY2lhbCB0cmFpbGVyLlxuXHRcdGNvbnN0IG9mZmljaWFsID0gdHJhaWxlcnMuZmlsdGVyKCh2aWRlbykgPT4ge1xuXHRcdFx0dmlkZW8ub2ZmaWNpYWwgPT09IHRydWU7XG5cdFx0fSk7XG5cblx0XHRvZmZpY2lhbC5sZW5ndGggIT09IDBcblx0XHRcdD8gKG1vdmllVHJhaWxlciA9IG9mZmljaWFsWzBdKVxuXHRcdFx0OiAobW92aWVUcmFpbGVyID0gdHJhaWxlcnNbMF0pO1xuXG5cdFx0cmV0dXJuIHtcblx0XHRcdHROYW1lOiBtb3ZpZVRyYWlsZXIubmFtZSxcblx0XHRcdGtleTogbW92aWVUcmFpbGVyLmtleSxcblx0XHRcdHNpdGU6IG1vdmllVHJhaWxlci5zaXRlLFxuXHRcdFx0dHlwZTogbW92aWVUcmFpbGVyLnR5cGUsXG5cdFx0XHRsYW5nOiBnZXRMYW5ndWFnZShtb3ZpZVRyYWlsZXIuaXNvXzYzOV8xKSxcblx0XHR9O1xuXHR9IGNhdGNoIChlcnIpIHtcblx0XHRhbGVydChlcnIpO1xuXHR9XG59XG5cbi8vIFJldHVybnMgYW4gYXJyIG9mIGEgbWF4aW11bSBvZiA1IHJldmlld3MgYmFzZWQgb24gdGhlIHR2IHNob3cgZnJvbVxuLy8gcmFuZG9tIHNvdXJjZXMuIElmIG5vIHJldmlld3MgYXJlIGZvdW5kLCB0aGlzIGZuYyByZXR1cm5zIGZhbHNlLlxuYXN5bmMgZnVuY3Rpb24gZmV0Y2hUdlJldmlld3ModHZfaWQpIHtcblx0dHJ5IHtcblx0XHRsZXQgcmV2aWV3cyA9IFtdO1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXG5cdFx0XHRgaHR0cHM6Ly9hcGkudGhlbW92aWVkYi5vcmcvMy90di8ke3R2X2lkfS9yZXZpZXdzP2FwaV9rZXk9JHtBUElfS0VZfSZsYW5ndWFnZT1lbi1VUyZwYWdlPTFgLFxuXHRcdFx0eyBtb2RlOiBcImNvcnNcIiB9XG5cdFx0KTtcblx0XHRjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXHRcdGlmIChkYXRhLnJlc3VsdHMubGVuZ3RoID09PSAwKSByZXR1cm4gZmFsc2U7XG5cblx0XHRsZXQgY291bnQgPSAxO1xuXHRcdGRhdGEucmVzdWx0cy5mb3JFYWNoKChyZXZpZXcpID0+IHtcblx0XHRcdHJldmlld3MucHVzaCh7XG5cdFx0XHRcdGF1dGhvcjogcmV2aWV3LmF1dGhvcixcblx0XHRcdFx0cmF0aW5nOiByZXZpZXcuYXV0aG9yX2RldGFpbHMucmF0aW5nLFxuXHRcdFx0XHRwaWNfcGF0aDogcmV2aWV3LmF1dGhvcl9kZXRhaWxzLmF2YXRhcl9wYXRoLFxuXHRcdFx0XHRjb250ZW50OiByZXZpZXcuY29udGVudCxcblx0XHRcdFx0dXJsOiByZXZpZXcudXJsLFxuXHRcdFx0XHRsYXN0X3VwZGF0ZWQ6IHJldmlldy51cGRhdGVkX2F0LFxuXHRcdFx0fSk7XG5cdFx0XHRjb3VudCsrO1xuXHRcdH0pO1xuXHRcdHJldHVybiByZXZpZXdzLnNsaWNlKDAsIDUpO1xuXHR9IGNhdGNoIChlcnIpIHtcblx0XHRhbGVydChlcnIpO1xuXHR9XG59XG5cbi8vIEhlbHBlciBmbmNzXG5mdW5jdGlvbiBnZXRDb3VudHJ5TmFtZShjb2RlKSB7XG5cdGxldCByZWdpb25OYW1lcyA9IG5ldyBJbnRsLkRpc3BsYXlOYW1lcyhbXCJlblwiXSwgeyB0eXBlOiBcInJlZ2lvblwiIH0pO1xuXHRyZXR1cm4gcmVnaW9uTmFtZXMub2YoY29kZSk7XG59XG5cbmZ1bmN0aW9uIGdldExhbmd1YWdlKGNvZGUpIHtcblx0Y29uc3QgbGFuZyA9IG5ldyBJbnRsLkRpc3BsYXlOYW1lcyhbXCJlblwiXSwgeyB0eXBlOiBcImxhbmd1YWdlXCIgfSk7XG5cdHJldHVybiBsYW5nLm9mKGNvZGUpO1xufVxuZXhwb3J0IHtcblx0ZmV0Y2hUdkRldGFpbHMsXG5cdGZldGNoVHZSZWNjb3MsXG5cdGZldGNoVHZQcm92aWRlcnMsXG5cdGZldGNoVHZUcmFpbGVyLFxuXHRmZXRjaFR2UmV2aWV3cyxcbn07XG4iLCJpbXBvcnQgKiBhcyBtb3ZpZSBmcm9tIFwiLi4vYXBpRnVuY3Rpb25zL2ZldGNoTW92aWVJbmZvXCI7XG5pbXBvcnQgKiBhcyB0diBmcm9tIFwiLi4vYXBpRnVuY3Rpb25zL2ZldGNoVHZJbmZvXCI7XG5cbi8qXG5EcmF3IGFuIGluZGl2aWR1YWwgc2VjdGlvbiBiYXNlZCBvbiB1c2VyIGlucHV0IHF1ZXJ5LlxuVGhpcyBzZWN0aW9uIHdpbGwgY29uc3RzIG9mIHRoZSBvdmVyYWxsIG1vdmllL3R2J3MgXG4gICAgLSBEZXRhaWxzLFxuICAgIC0gVGhlIHdhdGNoIHByb3ZpZGVycyBiYXNlZCBvbiBzcGVjaWZpYyBjb3VudHJpZXNcbiAgICAtIEF2YWlsYWJsZSB0cmFpbGVycyxcbiAgICAtIE90aGVyIHJlY29tbWVuZGF0aW9ucy5cbiAgICAtIFJldmlld3MgYnkgZXN0YWJsaXNoZWQgYXV0aG9ycyBiYXNlZCBmcm9tIHJhbmRvbSBzb3VyY2VzLlxuKi9cblxuY29uc3QgZHJhd1NlY3Rpb24gPSBhc3luYyAoaWQsIG1lZGlhKSA9PiB7XG5cdGNvbnN0IHNlY3Rpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2VjdGlvblwiKTtcblx0Y29uc3QgZGV0YWlscyA9IGF3YWl0IGdldEluZm8oaWQsIG1vdmllLmZldGNoTW92aWVEZXRhaWxzLCB0di5mZXRjaFR2RGV0YWlscyk7XG5cdGNvbnN0IHJlY3MgPSBhd2FpdCBnZXRJbmZvKGlkLCBtb3ZpZS5mZXRjaE1vdmllUmVjY29zLCB0di5mZXRjaFR2UmVjY29zKTtcblx0Y29uc3QgcHJvdmlkZXJzID0gYXdhaXQgZ2V0SW5mbyhcblx0XHRpZCxcblx0XHRtb3ZpZS5mZXRjaE1vdmllUHJvdmlkZXJzLFxuXHRcdHR2LmZldGNoVHZQcm92aWRlcnNcblx0KTtcblx0Y29uc3QgdHJhaWxlciA9IGF3YWl0IGdldEluZm8oaWQsIG1vdmllLmZldGNoTW92aWVUcmFpbGVyLCB0di5mZXRjaFR2VHJhaWxlcik7XG5cdGNvbnN0IHJldmlld3MgPSBhd2FpdCBnZXRJbmZvKGlkLCBtb3ZpZS5mZXRjaE1vdmllUmV2aWV3cywgdHYuZmV0Y2hUdlJldmlld3MpO1xuXHRjb25zb2xlLmxvZyhyZXZpZXdzKTtcblxuXHRmdW5jdGlvbiBkcmF3QWxsKCkge1xuXHRcdGFkZFRvU2VjdGlvbihkcmF3SW50cm8oKSk7XG5cdH1cblxuXHRmdW5jdGlvbiBhZGRUb1NlY3Rpb24ocGFydCkge1xuXHRcdHBhcnQgPyBzZWN0aW9uLmFwcGVuZENoaWxkKHBhcnQpIDogXCJcIjtcblx0fVxuXG5cdGZ1bmN0aW9uIHJlbmRlckVsZW1lbnQodGFnLCBjbGFzc05hbWUpIHtcblx0XHRjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZyk7XG5cdFx0Y29udGFpbmVyLmNsYXNzTGlzdC5hZGQoY2xhc3NOYW1lKTtcblx0XHRyZXR1cm4gY29udGFpbmVyO1xuXHR9XG5cblx0YXN5bmMgZnVuY3Rpb24gZ2V0SW5mbyhpZCwgbW92aWVGbmMsIHR2Rm5jKSB7XG5cdFx0cmV0dXJuIG1lZGlhID09PSBcIm1vdmllXCIgPyBhd2FpdCBtb3ZpZUZuYyhpZCkgOiBhd2FpdCB0dkZuYyhpZCk7XG5cdH1cblxuXHQvLyBEcmF3IChpZiBhbnkpIHRpdGxlLCBwaG90bywgdGFnbGluZSwgYW5kIHN1bW1hcnkuXG5cdGNvbnN0IGRyYXdJbnRybyA9IChpbWdTaXplKSA9PiB7XG5cdFx0Y29uc3QgaW50cm9Db250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXHRcdGludHJvQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJpbnRyb1wiKTtcblxuXHRcdGludHJvQ29udGFpbmVyLmFwcGVuZENoaWxkKGNyZWF0ZVRpdGxlKCkpO1xuXHRcdGRldGFpbHMudGFnbGluZSA/IGludHJvQ29udGFpbmVyLmFwcGVuZENoaWxkKHdyaXRlVGFnbGluZSgpKSA6IFwiXCI7XG5cblx0XHRjb25zdCBpbWcgPSByZW5kZXJJbWcoaW1nU2l6ZSk7XG5cdFx0aW1nID8gaW50cm9Db250YWluZXIuYXBwZW5kQ2hpbGQoaW1nKSA6IFwiXCI7XG5cblx0XHRmdW5jdGlvbiBjcmVhdGVUaXRsZSgpIHtcblx0XHRcdGNvbnN0IHRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImgxXCIpO1xuXHRcdFx0dGl0bGUudGV4dENvbnRlbnQgPSBkZXRhaWxzLm1OYW1lID8gZGV0YWlscy5tTmFtZSA6IGRldGFpbHMudE5hbWU7XG5cdFx0XHR0aXRsZS5jbGFzc0xpc3QuYWRkKFwidGl0bGVcIik7XG5cdFx0XHRyZXR1cm4gdGl0bGU7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gcmVuZGVySW1nKGltZ1NpemUgPSBcIlwiKSB7XG5cdFx0XHRjb25zdCBwb3N0ZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xuXHRcdFx0Y29uc3QgYmFzZUltZ1VybCA9IFwiaHR0cHM6Ly9pbWFnZS50bWRiLm9yZy90L3BcIjtcblx0XHRcdGxldCBpbWdfcGF0aDtcblx0XHRcdHBvc3Rlci5jbGFzc0xpc3QuYWRkKFwicG9zdGVyXCIpO1xuXG5cdFx0XHRpZiAoZGV0YWlscy5wb3N0ZXJfcGF0aCkge1xuXHRcdFx0XHRpbWdfcGF0aCA9IGRldGFpbHMucG9zdGVyX3BhdGg7XG5cdFx0XHR9IGVsc2UgaWYgKGRldGFpbHMuYmFja2Ryb3BfcGF0aCkge1xuXHRcdFx0XHRpbWdfcGF0aCA9IGRldGFpbHMuYmFja2Ryb3BfcGF0aDtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdCFpbWdTaXplXG5cdFx0XHRcdD8gKHBvc3Rlci5zcmMgPSBgJHtiYXNlSW1nVXJsfS9vcmlnaW5hbC8ke2ltZ19wYXRofWApXG5cdFx0XHRcdDogKHBvc3Rlci5zcmMgPSBgJHtiYXNlSW1nVXJsfS93JHtpbWdTaXplfS8ke2ltZ19wYXRofWApO1xuXHRcdFx0cG9zdGVyLmFsdCA9IFwiTW92aWUgcGljdHVyZSBwb3N0ZXJcIjtcblx0XHRcdHBvc3Rlci5zZXRBdHRyaWJ1dGUoXCJsb2FkaW5nXCIsIFwibGF6eVwiKTtcblx0XHRcdHJldHVybiBwb3N0ZXI7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gd3JpdGVUYWdsaW5lKCkge1xuXHRcdFx0Y29uc3QgdGFnUGFyYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJlbVwiKTtcblx0XHRcdHRhZ1BhcmEudGV4dENvbnRlbnQgPSBkZXRhaWxzLnRhZ2xpbmU7XG5cdFx0XHR0YWdQYXJhLmNsYXNzTGlzdC5hZGQoXCJ0YWdsaW5lXCIpO1xuXHRcdFx0cmV0dXJuIHRhZ1BhcmE7XG5cdFx0fVxuXHRcdHJldHVybiBpbnRyb0NvbnRhaW5lcjtcblx0fTtcblxuXHRjb25zdCBkcmF3U3ViSW5mb3MgPSAoKSA9PiB7XG5cdFx0Y29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblx0XHRjb250YWluZXIuY2xhc3NMaXN0LmFkZChcInN1YmluZm8tY29udGFpbmVyXCIpO1xuXG5cdFx0Ly8gUmVsZWFzZSBkYXRlIGZvciBtb3ZpZXMgYW5kIGZpcnN0IGFpcmVkIGZvciB0diBzaG93LlxuXHRcdGxldCBkYXRlLCBsYXN0QWlyZWQ7XG5cdFx0aWYgKGRldGFpbHMucmVsZWFzZV9kYXRlKSB7XG5cdFx0XHRkYXRlID0gY3JlYXRlU3ViSW5mbyhcblx0XHRcdFx0XCJSZWxlYXNlIERhdGU6XCIsXG5cdFx0XHRcdGRldGFpbHMucmVsZWFzZV9kYXRlLnNwbGl0KFwiLVwiKS5yZXZlcnNlKCkuam9pbihcIi9cIilcblx0XHRcdCk7XG5cdFx0XHRsYXN0QWlyZWQgPSBcIlwiO1xuXHRcdH0gZWxzZSBpZiAoZGV0YWlscy5maXJzdF9haXJfZGF0ZSkge1xuXHRcdFx0ZGF0ZSA9IGNyZWF0ZVN1YkluZm8oXG5cdFx0XHRcdFwiRmlyc3QgQWlyZWQ6IFwiLFxuXHRcdFx0XHRkZXRhaWxzLmZpcnN0X2Fpcl9kYXRlLnNwbGl0KFwiLVwiKS5yZXZlcnNlKCkuam9pbihcIi9cIilcblx0XHRcdCk7XG5cdFx0XHRsYXN0QWlyZWQgPSBjcmVhdGVTdWJJbmZvKFxuXHRcdFx0XHRcIkxhc3QgQWlyZWQ6IFwiLFxuXHRcdFx0XHRkZXRhaWxzLmxhc3RfYWlyX2RhdGUuc3BsaXQoXCItXCIpLnJldmVyc2UoKS5qb2luKFwiL1wiKVxuXHRcdFx0KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0ZGF0ZSA9IFwiXCI7XG5cdFx0fVxuXHRcdGxldCBydW50aW1lID0gZGV0YWlscy5ydW50aW1lID8gY29udmVydE1pblRvSHIoZGV0YWlscy5ydW50aW1lKSA6IFwiXCI7XG5cblx0XHRjb25zdCBpbmZvcm1hdGlvbiA9IFtcblx0XHRcdGRhdGUsXG5cdFx0XHRsYXN0QWlyZWQsXG5cdFx0XHRjcmVhdGVTdWJJbmZvKFwiU2hvdyBzdGF0dXM6XCIsIGRldGFpbHMuc3RhdHVzKSxcblx0XHRcdGNyZWF0ZVN1YkluZm8oXCJSdW50aW1lOiBcIiwgcnVudGltZSksXG5cdFx0XHRjcmVhdGVTdWJJbmZvKFwiR2VucmVzOiBcIiwgZGV0YWlscy5nZW5yZXMuam9pbihcIiwgXCIpKSxcblx0XHRcdGNyZWF0ZVN1YkluZm8oXCJOdW1iZXIgb2Ygc2Vhc29uczogXCIsIGRldGFpbHMubnVtYmVyX29mX3NlYXNvbnMpLFxuXHRcdFx0Y3JlYXRlU3ViSW5mbyhcIkVzdCBBdmcgRXBpc29kZSBSdW50aW1lOiBcIiwgZGV0YWlscy5lcGlzb2RlX3J1bl90aW1lKSxcblx0XHRcdGNyZWF0ZVN1YkluZm8oXCJDb3VudHJ5IG9mIE9yaWdpbjogXCIsIGRldGFpbHMub3JpZ2luX2NvdW50cnkpLFxuXG5cdFx0XHRjcmVhdGVTdWJJbmZvKFwiVm90ZSBBdmVyYWdlOiBcIiwgZGV0YWlscy52b3RlX2F2ZXJhZ2UpLFxuXHRcdFx0Y3JlYXRlU3ViSW5mbyhcIlZvdGUgQ291bnQ6IFwiLCBkZXRhaWxzLnZvdGVfY291bnQpLFxuXHRcdFx0Y3JlYXRlU3ViSW5mbyhcIlBvcHVsYXJpdHk6IFwiLCBkZXRhaWxzLnBvcHVsYXJpdHkpLFxuXHRcdF07XG5cblx0XHRpbmZvcm1hdGlvbi5mb3JFYWNoKChpbmZvKSA9PiAoaW5mbyA/IGNvbnRhaW5lci5hcHBlbmRDaGlsZChpbmZvKSA6IFwiXCIpKTtcblxuXHRcdGZ1bmN0aW9uIGNyZWF0ZVN1YkluZm8oY2F0ZWdvcnksIGluZm8pIHtcblx0XHRcdC8vIElnbm9yZXMgdHYgc3ViaW5mbyB0byBiZSBkaXNwbGF5ZWQgaWYgaXQncyBhIG1vdmllIGFuZFxuXHRcdFx0Ly8gdmljZXZlcnNhXG5cdFx0XHRpZiAoIWluZm8pIHJldHVybjtcblx0XHRcdGNvbnN0IHN1YkluZm8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXHRcdFx0Y29uc3QgY2F0ZWdvcnlOYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG5cdFx0XHRjb25zdCBjYXRlZ29yeUluZm8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcblxuXHRcdFx0c3ViSW5mby5jbGFzc0xpc3QuYWRkKFwic3ViLWluZm9cIik7XG5cdFx0XHRjYXRlZ29yeU5hbWUuY2xhc3NMaXN0LmFkZChcImNhdGVnb3J5LW5hbWVcIik7XG5cdFx0XHRjYXRlZ29yeUluZm8uY2xhc3NMaXN0LmFkZChcImNhdGVnb3J5LWluZm9cIik7XG5cblx0XHRcdGNhdGVnb3J5TmFtZS50ZXh0Q29udGVudCA9IGNhdGVnb3J5O1xuXHRcdFx0Y2F0ZWdvcnlJbmZvLnRleHRDb250ZW50ID0gaW5mbztcblxuXHRcdFx0W2NhdGVnb3J5TmFtZSwgY2F0ZWdvcnlJbmZvXS5mb3JFYWNoKChpbmZvKSA9PiBzdWJJbmZvLmFwcGVuZENoaWxkKGluZm8pKTtcblx0XHRcdHJldHVybiBzdWJJbmZvO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGNvbnZlcnRNaW5Ub0hyKG1pbnMpIHtcblx0XHRcdGNvbnN0IGhvdXJzID0gbWlucyAvIDYwO1xuXHRcdFx0Y29uc3QgckhvdXJzID0gTWF0aC5mbG9vcihob3Vycyk7XG5cdFx0XHRjb25zdCBtaW51dGVzID0gKGhvdXJzIC0gckhvdXJzKSAqIDYwO1xuXHRcdFx0Y29uc3Qgck1pbnV0ZXMgPSBNYXRoLnJvdW5kKG1pbnV0ZXMpO1xuXHRcdFx0cmV0dXJuIGAke3JIb3Vyc31oICR7ck1pbnV0ZXN9bWluYDtcblx0XHR9XG5cblx0XHRyZXR1cm4gY29udGFpbmVyO1xuXHR9O1xuXG5cdGNvbnN0IGRyYXdTdW1tYXJ5ID0gKCkgPT4ge1xuXHRcdGNvbnN0IHBhcmEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcblx0XHRwYXJhLnRleHRDb250ZW50ID0gZGV0YWlscy5zdW1tYXJ5O1xuXHRcdHBhcmEuY2xhc3NMaXN0LmFkZChcInN1bW1hcnlcIik7XG5cdFx0cmV0dXJuIHBhcmE7XG5cdH07XG5cblx0Y29uc3QgZHJhd1Byb3ZpZGVycyA9ICgpID0+IHtcblx0XHRsZXQgYXZhaWxQcm92aWRlcnM7IC8vIEJvb2xlYW4gdGhhdCBpbmRpY2F0ZXMgaWYgdGhlcmUgYXJlIGFueSB3YXRjaFxuXHRcdC8vIHByb3ZpZGVycyBmb3IgdGhpcyBzaG93LlxuXG5cdFx0Ly8gSG91c2VzIHRoZSBidG4gdGhhdCBvcGVucyB0aGUgbW9kYWwgYW5kIG92ZXJsYXksIGFuZCB0aGUgYXZhaWxhYmxlIHByb3ZpZGVycyBmb3IgJ3N0cmVhbWluZycsICdyZW50JyBhbmQgJ3B1cmNoYXNlJy5cblx0XHRjb25zdCBwcm92aWRlckNvbnRhaW5lciA9IHJlbmRlckVsZW1lbnQoXCJkaXZcIiwgXCJwcm92aWRlci1jb250YWluZXJcIik7XG5cdFx0Y29uc3QgY291bnRyeUJ0biA9IHJlbmRlckVsZW1lbnQoXCJidXR0b25cIiwgXCJjb3VudHJ5LWJ0blwiKTtcblx0XHRjb25zdCBob3VzZUNvbnRhaW5lciA9IHJlbmRlckVsZW1lbnQoXCJkaXZcIiwgXCJob3VzZS1wcm92aWRlci1jb250YWluZXJcIik7XG5cdFx0W2NvdW50cnlCdG4sIGhvdXNlQ29udGFpbmVyXS5mb3JFYWNoKChlbGVtKSA9PiB7XG5cdFx0XHRwcm92aWRlckNvbnRhaW5lci5hcHBlbmRDaGlsZChlbGVtKTtcblx0XHR9KTtcblxuXHRcdC8vIFNlYXJjaCBmb3IgZGVmYXVsdCBjb3VudHJ5IFwiQXVzdHJhbGlhXCIuIElmIG5vbmUgZm91bmQuIERyYXcgdGhlIGZpcnN0IGNvdW50cnkncyBwcm92aWRlci5cblx0XHRpZiAoT2JqZWN0LmtleXMocHJvdmlkZXJzKS5sZW5ndGgpIHtcblx0XHRcdGF2YWlsUHJvdmlkZXJzID0gdHJ1ZTtcblx0XHRcdGlmIChPYmplY3Qua2V5cyhwcm92aWRlcnMpLmluY2x1ZGVzKFwiQXVzdHJhbGlhXCIpKSB7XG5cdFx0XHRcdGRyYXdQcm92aWRlcihcIkF1c3RyYWxpYVwiKTtcblx0XHRcdFx0Y291bnRyeUJ0bi50ZXh0Q29udGVudCA9IFwiQXVzdHJhbGlhXCI7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjb25zdCBmaXJzdFByb3ZpZGVyID0gT2JqZWN0LmtleXMocHJvdmlkZXJzKVswXTtcblx0XHRcdFx0ZHJhd1Byb3ZpZGVyKGZpcnN0UHJvdmlkZXIpO1xuXHRcdFx0XHRjb3VudHJ5QnRuLnRleHRDb250ZW50ID0gYCR7Zmlyc3RQcm92aWRlcn1gO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRhdmFpbFByb3ZpZGVycyA9IGZhbHNlO1xuXHRcdFx0Y291bnRyeUJ0bi50ZXh0Q29udGVudCA9XG5cdFx0XHRcdFwiTm8gY291bnRyaWVzIG9mZmVyIHRoaXMgdHYvbW92aWUgYXQgdGhlIG1vbWVudC5cIjtcblx0XHR9XG5cblx0XHQvLyBhdmFpbFByb3ZpZGVycyA/IHJlbmRlckNvdW50cmllc01vZGFsKGNvdW50cnlCdG4udGV4dENvbnRlbnQpIDogXCJcIjsgLy8gdGVtcFxuXHRcdC8vIEFkZCBidG4gZXZlbnQgY2xpY2sgbGlzdGVuZXIgdG8gb3BlbiBtb2RhbFxuXHRcdGNvdW50cnlCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRpZiAoYXZhaWxQcm92aWRlcnMpIHtcblx0XHRcdFx0cmVuZGVyQ291bnRyaWVzTW9kYWwoY291bnRyeUJ0bi50ZXh0Q29udGVudCk7XG5cdFx0XHRcdGhpZ2hsaWdodEN1cnJDb3VudHJ5KGNvdW50cnlCdG4udGV4dENvbnRlbnQpO1xuXHRcdFx0XHQvLyBhZGQgY291bnRyeSBldmVudCBoZXJlXG5cdFx0XHRcdGFwcGx5Q2hvb3NlQ291bnRyeUZuY3MoKTtcblx0XHRcdH1cblx0XHR9KTtcblx0XHRmdW5jdGlvbiBhcHBseUNob29zZUNvdW50cnlGbmNzKCkge1xuXHRcdFx0Y29uc3QgY291bnRyaWVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jb3VudHJ5LWNvbnRhaW5lclwiKTtcblx0XHRcdGNvdW50cmllcy5mb3JFYWNoKChjb3VudHJ5KSA9PlxuXHRcdFx0XHRjb3VudHJ5LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuXHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0XHRpZiAoY291bnRyeS5sYXN0Q2hpbGQudGV4dENvbnRlbnQpIHtcblx0XHRcdFx0XHRcdGNvbnN0IHNlbGVjdGVkQ291bnRyeSA9IGNvdW50cnkubGFzdENoaWxkLnRleHRDb250ZW50O1xuXHRcdFx0XHRcdFx0Y2xlYXJQcm92aWRlcigpO1xuXHRcdFx0XHRcdFx0ZHJhd1Byb3ZpZGVyKHNlbGVjdGVkQ291bnRyeSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWwtY291bnRyeS1jb250YWluZXJcIikucmVtb3ZlKCk7XG5cdFx0XHRcdFx0ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mYWNlLW1hc2tcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuXHRcdFx0XHR9KVxuXHRcdFx0KTtcblx0XHR9XG5cblx0XHRyZXR1cm4gcHJvdmlkZXJDb250YWluZXI7XG5cblx0XHRmdW5jdGlvbiBkcmF3UHJvdmlkZXIoY291bnRyeU5hbWUgPSBcIkF1c3RyYWxpYVwiKSB7XG5cdFx0XHQvLyBDaGFuZ2UgdGV4dCBvZiBidG4gdG8gY291bnRyeU5hbWVcblx0XHRcdGNvdW50cnlCdG4udGV4dENvbnRlbnQgPSBjb3VudHJ5TmFtZTtcblxuXHRcdFx0Y29uc3Qgc3RyZWFtSW5mbyA9IHByb3ZpZGVyc1tjb3VudHJ5TmFtZV0uc3RyZWFtO1xuXHRcdFx0Y29uc3QgYnV5SW5mbyA9IHByb3ZpZGVyc1tjb3VudHJ5TmFtZV0uYnV5O1xuXHRcdFx0Y29uc3QgcmVudEluZm8gPSBwcm92aWRlcnNbY291bnRyeU5hbWVdLnJlbnQ7XG5cblx0XHRcdGNvbnN0IHNlcnZpY2VOYW1lcyA9IFtcIlN0cmVhbSBhdDpcIiwgXCJQdXJjaGFzZSBhdDpcIiwgXCJSZW50IGF0OlwiXTtcblx0XHRcdC8vIFRvIGFzc2lnbiBuYW1lcyBmb3IgZWFjaCBzZXZpY2UgcHJvdmlkZXJzLlxuXHRcdFx0Ly8gVGhpcyBpbmNyZW1lbnRzIGFzIHByb3ZpZGVycyBhcmUgbGlzdGVkIGZvciBlYWNoIHNlcnZpY2UuXG5cdFx0XHRsZXQgaWR4ID0gMDtcblxuXHRcdFx0W3N0cmVhbUluZm8sIGJ1eUluZm8sIHJlbnRJbmZvXS5mb3JFYWNoKChpbmZvKSA9PiB7XG5cdFx0XHRcdGNvbnN0IHNlcnZpY2VDb250YWluZXIgPSByZW5kZXJFbGVtZW50KFwiZGl2XCIsIFwic2VydmljZS1jb250YWluZXJcIik7XG5cdFx0XHRcdGNvbnN0IHNlcnZpY2VOYW1lID0gcmVuZGVyRWxlbWVudChcImRpdlwiLCBcInNlcnZpY2UtbmFtZVwiKTtcblx0XHRcdFx0Y29uc3Qgc2VydmljZU5hbWVCb2xkID0gcmVuZGVyRWxlbWVudChcImgyXCIsIFwic2VydmljZS1uYW1lLWJvbGRcIik7XG5cdFx0XHRcdGNvbnN0IHByb3ZpZGVyU2VydmljZUNvbnRhaW5lciA9IHJlbmRlckVsZW1lbnQoXG5cdFx0XHRcdFx0XCJkaXZcIixcblx0XHRcdFx0XHRcInByb3ZpZGVyLXNlcnZpY2UtY29udGFpbmVyXCJcblx0XHRcdFx0KTtcblxuXHRcdFx0XHRpbmZvLmZvckVhY2goKHByb3ZpZGVyKSA9PiB7XG5cdFx0XHRcdFx0Y29uc3QgcHJvdmlkZXJTZXJ2aWNlID0gcmVuZGVyRWxlbWVudChcImRpdlwiLCBcInByb3ZpZGVyLXNlcnZpY2VcIik7XG5cdFx0XHRcdFx0Ly8gQWRkIGltZyBhbmQgbmFtZSBvZiBwcm92aWRlci5cblx0XHRcdFx0XHRjb25zdCBwcm92aWRlckltZyA9IHJlbmRlckVsZW1lbnQoXCJpbWdcIiwgXCJwcm92aWRlci1pbWdcIik7XG5cdFx0XHRcdFx0Y29uc3QgcHJvdmlkZXJOYW1lID0gcmVuZGVyRWxlbWVudChcInNwYW5cIiwgXCJwcm92aWRlci1uYW1lXCIpO1xuXG5cdFx0XHRcdFx0aWYgKHByb3ZpZGVyLnByb3ZpZGVyX2xvZ29fcGF0aCkge1xuXHRcdFx0XHRcdFx0cHJvdmlkZXJJbWcuc3JjID0gYGh0dHBzOi8vaW1hZ2UudG1kYi5vcmcvdC9wL29yaWdpbmFsLyR7cHJvdmlkZXIucHJvdmlkZXJfbG9nb19wYXRofWA7XG5cdFx0XHRcdFx0XHRwcm92aWRlckltZy5hbHQgPSBgJHtwcm92aWRlci5wcm92aWRlcl9uYW1lfSBwaWN0dXJlLmA7XG5cdFx0XHRcdFx0XHRwcm92aWRlckltZy5zZXRBdHRyaWJ1dGUoXCJsb2FkaW5nXCIsIFwibGF6eVwiKTtcblx0XHRcdFx0XHRcdHByb3ZpZGVyTmFtZS50ZXh0Q29udGVudCA9IHByb3ZpZGVyLnByb3ZpZGVyX25hbWU7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0W3Byb3ZpZGVySW1nLCBwcm92aWRlck5hbWVdLmZvckVhY2goKGVsZW0pID0+IHtcblx0XHRcdFx0XHRcdHByb3ZpZGVyU2VydmljZS5hcHBlbmRDaGlsZChlbGVtKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRwcm92aWRlclNlcnZpY2VDb250YWluZXIuYXBwZW5kQ2hpbGQocHJvdmlkZXJTZXJ2aWNlKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0aWYgKGluZm8ubGVuZ3RoKSB7XG5cdFx0XHRcdFx0c2VydmljZU5hbWVCb2xkLnRleHRDb250ZW50ID0gYCR7c2VydmljZU5hbWVzW2lkeF19YDtcblx0XHRcdFx0XHRzZXJ2aWNlTmFtZS5hcHBlbmRDaGlsZChzZXJ2aWNlTmFtZUJvbGQpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlkeCsrO1xuXHRcdFx0XHRzZXJ2aWNlQ29udGFpbmVyLmFwcGVuZENoaWxkKHNlcnZpY2VOYW1lKTtcblx0XHRcdFx0c2VydmljZUNvbnRhaW5lci5hcHBlbmRDaGlsZChwcm92aWRlclNlcnZpY2VDb250YWluZXIpO1xuXHRcdFx0XHRob3VzZUNvbnRhaW5lci5hcHBlbmRDaGlsZChzZXJ2aWNlQ29udGFpbmVyKTtcblx0XHRcdH0pO1xuXHRcdH1cblx0XHRmdW5jdGlvbiBjbGVhclByb3ZpZGVyKCkge1xuXHRcdFx0aG91c2VDb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjtcblx0XHR9XG5cdH07XG5cblx0Y29uc3QgZHJhd1Jldmlld3MgPSAoKSA9PiB7XG5cdFx0aWYgKCFyZXZpZXdzKSByZXR1cm47XG5cdFx0Y29uc3QgcmV2aWV3Q29udGFpbmVyID0gcmVuZGVyRWxlbWVudChcImRpdlwiLCBcInJldmlldy1jb250YWluZXJcIik7XG5cdFx0Y29uc3QgdGl0bGUgPSByZW5kZXJFbGVtZW50KFwiaDJcIiwgXCJyZXZpZXctdGl0bGVcIik7XG5cdFx0dGl0bGUudGV4dENvbnRlbnQgPSBcIlJldmlld3M6XCI7XG5cdFx0cmV2aWV3Q29udGFpbmVyLmFwcGVuZENoaWxkKHRpdGxlKTtcblxuXHRcdHJldmlld3MuZm9yRWFjaCgocmV2aWV3KSA9PiBkcmF3UmV2aWV3KHJldmlldywgcmV2aWV3Q29udGFpbmVyKSk7XG5cdFx0cmV0dXJuIHJldmlld0NvbnRhaW5lcjtcblx0fTtcblxuXHRjb25zdCBkcmF3UmV2aWV3ID0gKHJldmlldywgY29udGFpbmVyKSA9PiB7XG5cdFx0Y29uc3QgcmVuZGVyUmV2aWV3SGVhZGluZyA9ICgpID0+IHtcblx0XHRcdGNvbnN0IHJldmlld0hlYWRpbmcgPSByZW5kZXJFbGVtZW50KFwiZGl2XCIsIFwicmV2aWV3LWhlYWRpbmdcIik7XG5cdFx0XHQvLyBSZW5kZXIgYXV0aG9yJ3MgcHJvZmlsZSBwaWMgaWYgYW55LlxuXHRcdFx0aWYgKHJldmlldy5waWNfcGF0aCkge1xuXHRcdFx0XHRjb25zdCBhdXRob3JQaWMgPSByZW5kZXJFbGVtZW50KFwiaW1nXCIsIFwiYXV0aG9yLXBpY1wiKTtcblx0XHRcdFx0aWYgKHJldmlldy5waWNfcGF0aC5zbGljZSgxLCA1KSAhPT0gXCJodHRwXCIpIHtcblx0XHRcdFx0XHRhdXRob3JQaWMuc3JjID0gYGh0dHBzOi8vaW1hZ2UudG1kYi5vcmcvdC9wL3czMDAvJHtyZXZpZXcucGljX3BhdGh9YDtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRhdXRob3JQaWMuc3JjID0gcmV2aWV3LnBpY19wYXRoLnNsaWNlKDEpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdFxuXHRcdFx0XHRhdXRob3JQaWMuYWx0ID0gYCR7cmV2aWV3LmF1dGhvcn0gcHJvZmlsZSBwaWN0dXJlLmA7XG5cdFx0XHRcdHJldmlld0hlYWRpbmcuYXBwZW5kQ2hpbGQoYXV0aG9yUGljKTtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0YWRkUmV2SW5mbyhyZXZpZXcuYXV0aG9yLCByZXZpZXdIZWFkaW5nLCBcImgzXCIsIFwicmV2aWV3LWF1dGhvclwiKTtcblx0XHRcdFxuXHRcdFx0XG5cdFx0XHRhZGRSZXZJbmZvKHJldmlldy5yYXRpbmcsIHJldmlld0hlYWRpbmcsIFwic3BhblwiLCBcInJldmlldy1yYXRpbmdcIik7XG5cdFx0XHRcblx0XHRcdHJldHVybiByZXZpZXdIZWFkaW5nO1xuXHRcdH07XG5cdFx0XG5cdFx0Y29uc3QgcmVuZGVyUmV2aWV3Qm9keSA9ICgpID0+IHtcblx0XHRcdGNvbnN0IHJldmlld0NvbnRlbnQgPSByZW5kZXJFbGVtZW50KFwicFwiLCBcInJldmlldy1jb250ZW50XCIpO1xuXHRcdFx0cmV2aWV3Q29udGVudC50ZXh0Q29udGVudCA9IGBcIiR7cmV2aWV3LmNvbnRlbnR9XCJgO1xuXHRcdFx0cmV0dXJuIHJldmlld0NvbnRlbnQ7XG5cdFx0fVxuXG5cdFx0Y29uc3QgcmVuZGVyUmV2aWV3Rm9vdGVyID0gKCkgPT4ge1xuXHRcdFx0Y29uc3QgcmV2aWV3Rm9vdGVyID0gcmVuZGVyRWxlbWVudChcImRpdlwiLCBcInJldmlldy1mb290ZXJcIik7XG5cdFx0XHRjb25zdCByZXZpZXdVcmwgPSByZW5kZXJFbGVtZW50KCdhJywgJ3Jldmlldy1saW5rJyk7XG5cdFx0XHRjb25zdCByZXZpZXdVcGRhdGVkID0gcmVuZGVyRWxlbWVudCgnc3BhbicsICdyZXZpZXctdXBkYXRlZCcpO1xuXG5cdFx0XHRyZXZpZXdVcmwuc2V0QXR0cmlidXRlKCdocmVmJywgYCR7cmV2aWV3LnVybH1gKVxuXHRcdFx0cmV2aWV3VXJsLnRleHRDb250ZW50ID0gXCJDbGljayBmb3IgcmV2aWV3IGxpbmtcIjtcblxuXHRcdFx0cmV2aWV3VXBkYXRlZC50ZXh0Q29udGVudCA9IGBMYXN0IHVwZGF0ZWQ6ICR7Zm9ybWF0UmV2RGF0ZShyZXZpZXcubGFzdF91cGRhdGVkKX1gO1xuXHRcdFx0cmV2aWV3Rm9vdGVyLmFwcGVuZENoaWxkKHJldmlld1VybCk7XG5cdFx0XHRyZXZpZXdGb290ZXIuYXBwZW5kQ2hpbGQocmV2aWV3VXBkYXRlZCk7XG5cblx0XHRcdHJldHVybiByZXZpZXdGb290ZXI7XG5cdFx0XHRmdW5jdGlvbiBmb3JtYXRSZXZEYXRlKGRhdGUpIHtcblx0XHRcdFx0ZGF0ZSA9IGRhdGUuc3BsaXQoXCItXCIpO1xuXHRcdFx0XHRkYXRlWzJdID0gZGF0ZVsyXS5zbGljZSgwLCAyKSArIFwiL1wiXG5cdFx0XHRcdHJldHVybiBkYXRlWzJdLmNvbmNhdChkYXRlLnNsaWNlKDAsIDIpLnJldmVyc2UoKS5qb2luKFwiL1wiKSk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Y29udGFpbmVyLmFwcGVuZENoaWxkKHJlbmRlclJldmlld0hlYWRpbmcoKSk7XG5cdFx0Y29udGFpbmVyLmFwcGVuZENoaWxkKHJlbmRlclJldmlld0JvZHkoKSk7XG5cdFx0Y29udGFpbmVyLmFwcGVuZENoaWxkKHJlbmRlclJldmlld0Zvb3RlcigpKTtcblxuXHRcdC8vIEhlbHBlciBmbmMgdGhhdCBjb2xsZWN0cyBjb3JyZXNwb25kaW5nIGluZm8gYW5kXG5cdFx0Ly8gY3JlYXRlcyBhIHNwYW4vZGl2IGNvbnRhaW5lciBpZiBpbmZvIGV4aXN0cy4gT3RoZXJ3aXNlLCByZXR1cm47XG5cdFx0ZnVuY3Rpb24gYWRkUmV2SW5mbyhpbmZvLCBjb250YWluZXIsIHRhZywgY2xhc3NOYW1lKSB7XG5cdFx0XHRjb25zdCBpbmZvQ29udGFpbmVyID0gcmVuZGVyRWxlbWVudCh0YWcsIGNsYXNzTmFtZSk7XG5cdFx0XHRpZiAoaW5mbykge1xuXHRcdFx0XHRpbmZvQ29udGFpbmVyLnRleHRDb250ZW50ID0gaW5mbztcblx0XHRcdH1cblxuXHRcdFx0Ly8gUmV2aWV3cyBvdXQgb2YgMTBcblx0XHRcdGlmKGluZm8gPT09IHJldmlldy5yYXRpbmcpIHtcblx0XHRcdFx0aW5mb0NvbnRhaW5lci50ZXh0Q29udGVudCA9IGAke2luZm99LzEwYFxuXHRcdFx0fVxuXHRcdFx0Y29udGFpbmVyLmFwcGVuZENoaWxkKGluZm9Db250YWluZXIpO1xuXHRcdH1cblx0fTtcblxuXHRmdW5jdGlvbiByZW5kZXJDb3VudHJpZXNNb2RhbChjdXJyQ291bnRyeU5hbWUpIHtcblx0XHQvLyBDb3VudHJ5IG5hbWVzXG5cdFx0Y29uc3QgcHJvdmlkZXJDb3VudHJpZXMgPSBPYmplY3Qua2V5cyhwcm92aWRlcnMpO1xuXHRcdC8vIFNvcnQgYnkgY291bnRyeSBuYW1lIGFuZCBjb2RlcyBpbnRvIGFuIG9iai5cblx0XHRsZXQgY291bnRyaWVzID0ge307XG5cdFx0bGV0IGN1cnJDb3VudHJ5Q29kZTtcblx0XHRwcm92aWRlckNvdW50cmllcy5mb3JFYWNoKChjb3VudHJ5KSA9PiB7XG5cdFx0XHRjb3VudHJpZXNbY291bnRyeV0gPSBwcm92aWRlcnNbY291bnRyeV0uY291bnRyeUNvZGU7XG5cblx0XHRcdC8vIEZpbmQgY3VycmVudCBjb3VudHJ5IGNvZGUuXG5cdFx0XHRpZiAoY3VyckNvdW50cnlOYW1lID09PSBjb3VudHJ5KSB7XG5cdFx0XHRcdGN1cnJDb3VudHJ5Q29kZSA9IHByb3ZpZGVyc1tjb3VudHJ5XS5jb3VudHJ5Q29kZTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdGNvbnN0IG1vZGFsQ29udGFpbmVyID0gcmVuZGVyRWxlbWVudChcImZvcm1cIiwgXCJtb2RhbC1jb3VudHJ5LWNvbnRhaW5lclwiKTtcblx0XHRjb25zdCBtb2RhbEhlYWRlciA9IHJlbmRlckVsZW1lbnQoXCJkaXZcIiwgXCJtb2RhbC1oZWFkZXJcIik7XG5cblx0XHRjb25zdCBtb2RhbEJvZHkgPSByZW5kZXJFbGVtZW50KFwiZGl2XCIsIFwibW9kYWwtYm9keVwiKTtcblx0XHRjb25zdCBtb2RhbEN1cnJlbnRDb3VudHJ5ID0gcmVuZGVyRWxlbWVudChcImRpdlwiLCBcIm1vZGFsLWN1cnJlbnQtY291bnRyeVwiKTtcblx0XHRjb25zdCBtb2RhbElucHV0U2VhcmNoID0gcmVuZGVyRWxlbWVudChcImlucHV0XCIsIFwibW9kYWwtaW5wdXQtc2VhcmNoXCIpO1xuXHRcdGNvbnN0IG1vZGFsTGlzdENvdW50cmllcyA9IHJlbmRlckVsZW1lbnQoXCJ1bFwiLCBcIm1vZGFsLWxpc3QtY291bnRyaWVzXCIpO1xuXG5cdFx0Y29uc3QgbW9kYWxDbG9zZUJ0biA9IHJlbmRlckVsZW1lbnQoXCJidXR0b25cIiwgXCJtb2RhbC1jbG9zZS1idG5cIik7XG5cblx0XHRjb25zdCByZW5kZXJIZWFkaW5nID0gKCkgPT4ge1xuXHRcdFx0Ly8gSGVhZGluZyB0aGF0IGRpc3BsYXlzIGN1cnJlbnQgY291bnRyeSBzZWxlY3RlZC5cblx0XHRcdGNvbnN0IGhlYWRpbmcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaDJcIik7XG5cdFx0XHRoZWFkaW5nLnRleHRDb250ZW50ID0gXCJDb3VudHJpZXNcIjtcblxuXHRcdFx0Y29uc3QgY3VyckNvdW50cnkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaDNcIik7XG5cdFx0XHRjb25zdCBzZWFyY2hMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKTtcblxuXHRcdFx0Y29uc3Qgc2VhcmNoQXR0cmlidXRlcyA9IHtcblx0XHRcdFx0aWQ6IFwibW9kYWwtaW5wdXQtc2VhcmNoXCIsXG5cdFx0XHRcdHR5cGU6IFwic2VhcmNoXCIsXG5cdFx0XHRcdHBsYWNlaG9sZGVyOiBcIvCflI0gU2VhcmNoIGZvciBjb3VudHJpZXMuLi5cIixcblx0XHRcdFx0dGl0bGU6IFwiVHlwZSBpbiBhIGNvdW50cnkgbmFtZVwiLFxuXHRcdFx0XHRyb2xlOiBcInNlYXJjaFwiLFxuXHRcdFx0fTtcblxuXHRcdFx0Zm9yIChsZXQgaSBpbiBzZWFyY2hBdHRyaWJ1dGVzKSB7XG5cdFx0XHRcdG1vZGFsSW5wdXRTZWFyY2guc2V0QXR0cmlidXRlKGksIHNlYXJjaEF0dHJpYnV0ZXNbaV0pO1xuXHRcdFx0fVxuXHRcdFx0bW9kYWxJbnB1dFNlYXJjaC5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgZmlsdGVyUmVzdWx0cyk7XG5cdFx0XHRtb2RhbElucHV0U2VhcmNoLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcblx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0fSk7XG5cblx0XHRcdC8vIEZpbmQgY3VycmVudCBjb3VudHJ5IG5hbWUgYW5kIGNvZGUuXG5cdFx0XHRjb25zdCBjdXJyQ291bnRyeUZsYWcgPSByZW5kZXJDb3VudHJ5RmxhZyhcblx0XHRcdFx0Y3VyckNvdW50cnlDb2RlLFxuXHRcdFx0XHRjdXJyQ291bnRyeU5hbWVcblx0XHRcdCk7XG5cdFx0XHRjdXJyQ291bnRyeS50ZXh0Q29udGVudCA9IGN1cnJDb3VudHJ5TmFtZTtcblxuXHRcdFx0bW9kYWxDdXJyZW50Q291bnRyeS5hcHBlbmRDaGlsZChjdXJyQ291bnRyeUZsYWcpO1xuXHRcdFx0bW9kYWxDdXJyZW50Q291bnRyeS5hcHBlbmRDaGlsZChjdXJyQ291bnRyeSk7XG5cblx0XHRcdHNlYXJjaExhYmVsLmh0bWxGb3IgPSBgJHttb2RhbElucHV0U2VhcmNoLmlkfWA7XG5cblx0XHRcdFtoZWFkaW5nLCBtb2RhbEN1cnJlbnRDb3VudHJ5LCBzZWFyY2hMYWJlbCwgbW9kYWxJbnB1dFNlYXJjaF0uZm9yRWFjaChcblx0XHRcdFx0KGZvcm1FbGVtKSA9PiB7XG5cdFx0XHRcdFx0bW9kYWxIZWFkZXIuYXBwZW5kQ2hpbGQoZm9ybUVsZW0pO1xuXHRcdFx0XHR9XG5cdFx0XHQpO1xuXHRcdH07XG5cblx0XHRjb25zdCByZW5kZXJCb2R5ID0gKCkgPT4ge1xuXHRcdFx0bW9kYWxMaXN0Q291bnRyaWVzLmlkID0gXCJjb3VudHJpZXMtbGlzdFwiO1xuXHRcdFx0Zm9yIChsZXQgY291bnRyeSBpbiBjb3VudHJpZXMpIHtcblx0XHRcdFx0bGV0IGNvdW50cnlDb2RlID0gY291bnRyaWVzW2NvdW50cnldO1xuXG5cdFx0XHRcdGNvbnN0IGNvdW50cnlDb250YWluZXIgPSByZW5kZXJFbGVtZW50KFwibGlcIiwgXCJjb3VudHJ5LWNvbnRhaW5lclwiKTtcblx0XHRcdFx0Y29uc3QgY291bnRyeUZsYWcgPSByZW5kZXJDb3VudHJ5RmxhZyhjb3VudHJ5Q29kZSwgY291bnRyeSk7XG5cdFx0XHRcdGNvbnN0IGNvdW50cnlOYW1lID0gcmVuZGVyRWxlbWVudChcImFcIiwgXCJjb3VudHJ5LW5hbWVcIik7XG5cblx0XHRcdFx0Y291bnRyeU5hbWUudGV4dENvbnRlbnQgPSBjb3VudHJ5O1xuXHRcdFx0XHRjb3VudHJ5TmFtZS5zZXRBdHRyaWJ1dGUoXCJocmVmXCIsIFwiI1wiKTtcblxuXHRcdFx0XHRbY291bnRyeUZsYWcsIGNvdW50cnlOYW1lXS5mb3JFYWNoKChjb3VudHJ5RWxlbSkgPT4ge1xuXHRcdFx0XHRcdGNvdW50cnlDb250YWluZXIuYXBwZW5kQ2hpbGQoY291bnRyeUVsZW0pO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0XHRtb2RhbExpc3RDb3VudHJpZXMuYXBwZW5kQ2hpbGQoY291bnRyeUNvbnRhaW5lcik7XG5cdFx0XHR9XG5cblx0XHRcdFttb2RhbExpc3RDb3VudHJpZXNdLmZvckVhY2goKGZvcm1FbGVtKSA9PiB7XG5cdFx0XHRcdG1vZGFsQm9keS5hcHBlbmRDaGlsZChmb3JtRWxlbSk7XG5cdFx0XHR9KTtcblx0XHR9O1xuXG5cdFx0Y29uc3QgcmVuZGVyQ2xvc2VCdG4gPSAoY2xvc2VGbmMpID0+IHtcblx0XHRcdGNvbnN0IGNsb3NlU3ltYiA9IHJlbmRlckVsZW1lbnQoXCJpXCIsIFwiZmFcIik7XG5cdFx0XHRjbG9zZVN5bWIuY2xhc3NMaXN0LmFkZChcImZhLWNsb3NlXCIpO1xuXHRcdFx0bW9kYWxDbG9zZUJ0bi5hcHBlbmRDaGlsZChjbG9zZVN5bWIpO1xuXHRcdFx0Y2xvc2VGbmMoKTtcblx0XHR9O1xuXHRcdGNvbnN0IGFkZENsb3NlRm5jID0gKCkgPT4ge1xuXHRcdFx0bW9kYWxDbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcblx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRjb25zdCBjdXJyZW50Rm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWwtY291bnRyeS1jb250YWluZXJcIik7XG5cdFx0XHRcdGN1cnJlbnRGb3JtLnJlbW92ZSgpO1xuXHRcdFx0XHRkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZhY2UtbWFza1wiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5cdFx0XHR9KTtcblx0XHR9O1xuXG5cdFx0Ly8gUmVuZGVyIHNlY3Rpb25zIG9mIHRoZSBmb3JtLlxuXHRcdHJlbmRlckhlYWRpbmcoKTtcblx0XHRyZW5kZXJCb2R5KCk7XG5cdFx0cmVuZGVyQ2xvc2VCdG4oYWRkQ2xvc2VGbmMpO1xuXG5cdFx0W21vZGFsSGVhZGVyLCBtb2RhbEJvZHksIG1vZGFsQ2xvc2VCdG5dLmZvckVhY2goKG1vZGFsRWxlbSkgPT5cblx0XHRcdG1vZGFsQ29udGFpbmVyLmFwcGVuZENoaWxkKG1vZGFsRWxlbSlcblx0XHQpO1xuXG5cdFx0Y29uc3QgYm9keURvY3VtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImJvZHlcIik7XG5cdFx0Ym9keURvY3VtZW50LmFwcGVuZChtb2RhbENvbnRhaW5lcik7XG5cdFx0ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mYWNlLW1hc2tcIikuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcblxuXHRcdGZ1bmN0aW9uIHJlbmRlckNvdW50cnlGbGFnKGNvdW50cnlDb2RlLCBjb3VudHJ5TmFtZSkge1xuXHRcdFx0Y29uc3QgZmxhZyA9IHJlbmRlckVsZW1lbnQoXCJpbWdcIiwgXCJjb3VudHJ5LWZsYWdcIik7XG5cdFx0XHRmbGFnLnNldEF0dHJpYnV0ZShcImNyb3Nzb3JpZ2luXCIsIFwiYW5vbnltb3VzXCIpO1xuXHRcdFx0ZmxhZy5zcmMgPSBgaHR0cHM6Ly9jb3VudHJ5ZmxhZ3NhcGkuY29tL3BuZy8ke2NvdW50cnlDb2RlfWA7XG5cdFx0XHRmbGFnLmFsdCA9IGAke2NvdW50cnlOYW1lfSBmbGFnYDtcblx0XHRcdHJldHVybiBmbGFnO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGZpbHRlclJlc3VsdHMoKSB7XG5cdFx0XHRsZXQgaW5wdXQsIGZpbHRlciwgdWwsIGxpLCBhLCBpLCB0eHRWYWx1ZTtcblx0XHRcdGlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtb2RhbC1pbnB1dC1zZWFyY2hcIik7XG5cdFx0XHRmaWx0ZXIgPSBpbnB1dC52YWx1ZS50b1VwcGVyQ2FzZSgpO1xuXHRcdFx0dWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvdW50cmllcy1saXN0XCIpO1xuXHRcdFx0bGkgPSB1bC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImxpXCIpO1xuXG5cdFx0XHQvLyBMb2dpYyB0aGF0IGZpbHRlcnMgdGhlIGNvdW50cmllcyBiYXNlZCBvbiBpbnB1dC5cblx0XHRcdGZvciAoaSA9IDA7IGkgPCBsaS5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRhID0gbGlbaV0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJhXCIpWzBdO1xuXHRcdFx0XHR0eHRWYWx1ZSA9IGEudGV4dENvbnRlbnQgfHwgYS5pbm5lclRleHQ7XG5cdFx0XHRcdGlmICh0eHRWYWx1ZS50b1VwcGVyQ2FzZSgpLmluZGV4T2YoZmlsdGVyKSA+IC0xKSB7XG5cdFx0XHRcdFx0bGlbaV0uc3R5bGUuZGlzcGxheSA9IFwiXCI7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0bGlbaV0uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdGZ1bmN0aW9uIGhpZ2hsaWdodEN1cnJDb3VudHJ5KGNvdW50cnlOYW1lKSB7XG5cdFx0Ly8gSGlnaGxpZ2h0IHNlbGVjdGVkIGN1cnJlbnQgY291bnRyeSBpbiB0aGUgbGlzdCBvZiBjb3VudHJpZXMgd2hlblxuXHRcdC8vIG1vZGFsIGlzIG9wZW5lZC4gQWRkIGEgdGljayBpY29uIHNpbXVsdGFuZW91c2x5XG5cblx0XHRsZXQgdWwsIGxpLCBpLCBhLCB0eHRWYWx1ZTtcblx0XHR1bCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY291bnRyaWVzLWxpc3RcIik7XG5cdFx0bGkgPSB1bC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImxpXCIpO1xuXHRcdGZvciAoaSA9IDA7IGkgPCBsaS5sZW5ndGg7IGkrKykge1xuXHRcdFx0YSA9IGxpW2ldLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYVwiKVswXTtcblx0XHRcdHR4dFZhbHVlID0gYS50ZXh0Q29udGVudCB8fCBhLmlubmVyVGV4dDtcblx0XHRcdGlmICh0eHRWYWx1ZSA9PT0gY291bnRyeU5hbWUpIHtcblx0XHRcdFx0bGlbaV0uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJyZ2JhKDI1LCAxNTAsIDE1MCwgMC41KVwiO1xuXHRcdFx0XHRsaVtpXS5zdHlsZS50cmFuc2Zvcm0gPSBcInNjYWxlKDEuMDI1KVwiO1xuXHRcdFx0XHRjb25zdCB0aWNrSWNvbiA9IHJlbmRlckVsZW1lbnQoXCJpXCIsIFwiZmFcIik7XG5cdFx0XHRcdHRpY2tJY29uLmNsYXNzTGlzdC5hZGQoXCJmYS1jaGVja1wiKTtcblx0XHRcdFx0bGlbaV0uYXBwZW5kKHRpY2tJY29uKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblx0cmV0dXJuIHtcblx0XHRzZWN0aW9uLFxuXHRcdGFkZFRvU2VjdGlvbixcblx0XHRkcmF3QWxsLFxuXHRcdGRyYXdJbnRybyxcblx0XHRkcmF3U3ViSW5mb3MsXG5cdFx0ZHJhd1N1bW1hcnksXG5cdFx0ZHJhd1Byb3ZpZGVycyxcblx0XHRkcmF3UmV2aWV3cyxcblx0fTtcbn07XG5cbmV4cG9ydCB7IGRyYXdTZWN0aW9uIH07XG4iLCJpbXBvcnQgY29sbGVjdFNlYXJjaFF1ZXJ5IGZyb20gXCIuL3NlYXJjaFwiO1xuaW1wb3J0IHsgZmV0Y2hJZHMgfSBmcm9tIFwiLi4vYXBpRnVuY3Rpb25zL2ZldGNoSWRcIjtcbmltcG9ydCAqIGFzIG1vdmllIGZyb20gXCIuLi9hcGlGdW5jdGlvbnMvZmV0Y2hNb3ZpZUluZm9cIjtcbmltcG9ydCB7IGRyYXdTZWN0aW9uIH0gZnJvbSBcIi4vZHJhd1NlY3Rpb25cIjtcblxuYXN5bmMgZnVuY3Rpb24gZHJhd1NlY3Rpb25zKHRpdGxlKSB7XG5cdGNvbnN0IGlkcyA9IGF3YWl0IGZldGNoSWRzKHRpdGxlKTtcblx0Y29uc3QgbWFpbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWFpbi1jb250YWluZXJcIik7XG5cdGxldCBzZWN0aW9ucyA9IFtdO1xuXG5cdC8vIE1ha2UgYW4gYXJyIHcvIGVsZW1zIG9mIFtpZCwgbWVkaWFdXG5cdGZvciAobGV0IGlkIGluIGlkcykge1xuXG5cdFx0c2VjdGlvbnMucHVzaChbaWQsIGlkc1tpZF1dKVxuXHR9XG5cblx0c2VjdGlvbnMuZm9yRWFjaChcblx0XHRhc3luYyAoc2VjdGlvbikgPT4gYXdhaXQgcmVuZGVyU2VjdGlvbihzZWN0aW9uWzBdLCBzZWN0aW9uWzFdKVxuXHQpO1xuXG5cdGFzeW5jIGZ1bmN0aW9uIHJlbmRlclNlY3Rpb24oaWQsIG1lZGlhKSB7XG5cdFx0Y29uc3Qgc2VjdGlvbiA9IGF3YWl0IGRyYXdTZWN0aW9uKGlkLCBtZWRpYSk7XG5cdFx0c2VjdGlvbi5hZGRUb1NlY3Rpb24oc2VjdGlvbi5kcmF3SW50cm8oXCIzMDBcIikpO1xuXHRcdHNlY3Rpb24uYWRkVG9TZWN0aW9uKHNlY3Rpb24uZHJhd1N1YkluZm9zKCkpO1xuXHRcdHNlY3Rpb24uYWRkVG9TZWN0aW9uKHNlY3Rpb24uZHJhd1N1bW1hcnkoKSk7XG5cdFx0c2VjdGlvbi5hZGRUb1NlY3Rpb24oc2VjdGlvbi5kcmF3UHJvdmlkZXJzKCkpO1xuXHRcdHNlY3Rpb24uYWRkVG9TZWN0aW9uKHNlY3Rpb24uZHJhd1Jldmlld3MoKSk7XG5cdFx0bWFpbi5hcHBlbmRDaGlsZChzZWN0aW9uLnNlY3Rpb24pO1xuXHRcdHJldHVybiByZW5kZXJTZWN0aW9uO1xuXHR9XG59XG5cbmZ1bmN0aW9uIGNsZWFyU2VjdGlvbnMoKSB7XG5cdGNvbnN0IG1haW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1haW4tY29udGFpbmVyXCIpO1xuXHRtYWluLmlubmVySFRNTCA9IFwiXCI7XG59XG5cbmV4cG9ydCB7IGRyYXdTZWN0aW9ucywgY2xlYXJTZWN0aW9ucyB9O1xuIiwiaW1wb3J0IHsgZHJhd1NlY3Rpb25zIH0gZnJvbSBcIi4vanMvRE9NRnVuY3Rpb25zL2RyYXdTZWN0aW9uc1wiO1xuaW1wb3J0IGFkZFN1Ym1pdFNlYXJjaEZuYyBmcm9tIFwiLi9qcy9VSS9zdWJtaXRTZWFyY2hcIjtcblxuY29uc29sZS5sb2coXCJIZWxsbyBXb3JsZFwiKTtcbi8vIGZldGNoSWRzKCdJUk9OIE1BTicpO1xuXG4vLyBmZXRjaE1vdmllRHVtbXkoMTcyNik7XG4vLyBmZXRjaE1vdmllRHVtbXkoMzA5Nyk7IC8vIGZhaWwgdG8gZmV0Y2ggYmVjYXVzZSBpdHMgdHYuXG4vLyBmZXRjaE1vdmllRHVtbXkoMTAxMzgpO1xuLy8gZmV0Y2hNb3ZpZUR1bW15KDY4NzIxKTtcblxuLy8gYXN5bmMgZnVuY3Rpb24gZmV0Y2hNb3ZpZUR1bW15KGlkKSB7XG4vLyAgICAgY29uc3QgbW92aWVEZXRhaWxzID0gYXdhaXQgbW92aWUuZmV0Y2hNb3ZpZURldGFpbHMoaWQpO1xuLy8gICAgIGNvbnN0IG1vdmllUmVjY29zID0gYXdhaXQgbW92aWUuZmV0Y2hNb3ZpZVJlY2NvcyhpZCk7XG4vLyAgICAgY29uc3QgbW92aWVQcm92aWRlcnMgPSBhd2FpdCBtb3ZpZS5mZXRjaE1vdmllUHJvdmlkZXJzKGlkKTtcbi8vICAgICBjb25zdCBtb3ZpZVRyYWlsZXIgPSBhd2FpdCBtb3ZpZS5mZXRjaE1vdmllVHJhaWxlcihpZCk7XG4vLyAgICAgY29uc3QgbW92aWVSZXZpZXdzID0gYXdhaXQgbW92aWUuZmV0Y2hNb3ZpZVJldmlld3MoaWQpO1xuLy8gICAgIGNvbnNvbGUubG9nKG1vdmllRGV0YWlscyk7XG4vLyAgICAgY29uc29sZS5sb2cobW92aWVSZWNjb3MpO1xuLy8gICAgIGNvbnNvbGUubG9nKG1vdmllUHJvdmlkZXJzKTtcbi8vICAgICBjb25zb2xlLmxvZyhtb3ZpZVRyYWlsZXIpO1xuLy8gICAgIGNvbnNvbGUubG9nKG1vdmllUmV2aWV3cyk7XG4vLyB9XG5cbi8vIGFkZFN1Ym1pdFNlYXJjaEZ1bmN0aW9uKCk7XG5cbmFkZFN1Ym1pdFNlYXJjaEZuYygpO1xuLy8gZHJhd1NlY3Rpb25zKFwiaXJvbiBtYW5cIik7XG5kcmF3U2VjdGlvbnMoXCJHYW1lIG9mIFRocm9uZXNcIik7XG4vLyBkcmF3U2VjdGlvbnMoXCJwZWUgbWFrXCIpO1xuIiwiaW1wb3J0IHsgZHJhd1NlY3Rpb25zLCBjbGVhclNlY3Rpb25zIH0gZnJvbSBcIi4uL0RPTUZ1bmN0aW9ucy9kcmF3U2VjdGlvbnNcIjtcblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gYWRkU3VibWl0U2VhcmNoRm5jKCkge1xuXHRjb25zdCBzZWFyY2hCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNlYXJjaC1xdWVyeVwiKTtcblx0c2VhcmNoQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBhc3luYyAoZSkgPT4ge1xuXHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRjb25zdCBxdWVyeSA9IGludGVycHJldFRvUXVlcnkoXG5cdFx0XHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImlucHV0LXNlYXJjaFwiKS52YWx1ZVxuXHRcdCk7XG5cdFx0aWYgKCFxdWVyeSkge1xuXHRcdFx0YWxlcnQoXCJQbGVhc2UgZW50ZXIgYSB2YWxpZCBtb3ZpZS90diBzaG93XCIpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRjbGVhclNlY3Rpb25zKCk7XG5cdFx0YXdhaXQgZHJhd1NlY3Rpb25zKHF1ZXJ5KTtcblxuXHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2VhcmNoLXF1ZXJ5XCIpLnZhbHVlID0gXCJcIjtcblx0fSk7XG59XG5cbmZ1bmN0aW9uIGludGVycHJldFRvUXVlcnkobmFtZSkge1xuXHRyZXR1cm4gbmFtZS5zcGxpdChcIiBcIikuam9pbihcIitcIik7XG59XG4iXSwibmFtZXMiOlsiQVBJX0tFWSIsImFzeW5jIiwiZmV0Y2hNb3ZpZURldGFpbHMiLCJtb3ZpZV9pZCIsInJlc3BvbnNlIiwiZmV0Y2giLCJtb2RlIiwiZGF0YSIsImpzb24iLCJnZW5yZXMiLCJyZWR1Y2UiLCJhY2MiLCJ2YWwiLCJuYW1lIiwibU5hbWUiLCJvcmlnaW5hbF90aXRsZSIsInN1bW1hcnkiLCJvdmVydmlldyIsInRhZ2xpbmUiLCJwb3B1bGFyaXR5Iiwidm90ZV9hdmVyYWdlIiwidm90ZV9jb3VudCIsInZpZGVvIiwicnVudGltZSIsInBvc3Rlcl9wYXRoIiwiYmFja2Ryb3BfcGF0aCIsInJlbGVhc2VfZGF0ZSIsImVyciIsImFsZXJ0IiwiZmV0Y2hNb3ZpZVJlY2NvcyIsInJlY01vdmllcyIsInJlc3VsdHMiLCJjb3VudCIsIm1vdmllIiwiaWQiLCJmZXRjaE1vdmllUHJvdmlkZXJzIiwicHJvdmlkZXJzQnlDb3VudHJ5IiwiY291bnRyeUNvZGUiLCJjb3VudHJ5IiwiY29kZSIsIkludGwiLCJEaXNwbGF5TmFtZXMiLCJ0eXBlIiwib2YiLCJzdHJlYW0iLCJyZW50IiwiYnV5Iiwic29ydFByb3ZpZGVycyIsInNlcnZpY2VzIiwiY29sbGVjdGlvbiIsImZvckVhY2giLCJzZXJ2aWNlIiwicHJvdmlkZXJJbmZvIiwicHJvdmlkZXJfbmFtZSIsInByb3ZpZGVyX2xvZ29fcGF0aCIsImxvZ29fcGF0aCIsInB1c2giLCJmbGF0cmF0ZSIsImZldGNoTW92aWVUcmFpbGVyIiwibW92aWVUcmFpbGVyIiwidHJhaWxlcnMiLCJmaWx0ZXIiLCJsZW5ndGgiLCJvZmZpY2lhbCIsImtleSIsInNpdGUiLCJsYW5nIiwiaXNvXzYzOV8xIiwiZmV0Y2hNb3ZpZVJldmlld3MiLCJyZXZpZXdzIiwicmV2aWV3IiwiYXV0aG9yIiwicmF0aW5nIiwiYXV0aG9yX2RldGFpbHMiLCJwaWNfcGF0aCIsImF2YXRhcl9wYXRoIiwiY29udGVudCIsInVybCIsImxhc3RfdXBkYXRlZCIsInVwZGF0ZWRfYXQiLCJzbGljZSIsImZldGNoVHZEZXRhaWxzIiwidHZfaWQiLCJjb25zb2xlIiwibG9nIiwidE5hbWUiLCJvcmlnaW5hbF9uYW1lIiwibGFuZ3VhZ2UiLCJvcmlnaW5hbF9sYW5ndWFnZSIsImVwaXNvZGVfcnVuX3RpbWUiLCJvcmlnaW5fY291bnRyeSIsInN0YXR1cyIsInNlYXNvbnMiLCJudW1iZXJfb2Zfc2Vhc29ucyIsImZpcnN0X2Fpcl9kYXRlIiwibGFzdF9haXJfZGF0ZSIsImZldGNoVHZSZWNjb3MiLCJyZWNUdnMiLCJ0diIsImZldGNoVHZQcm92aWRlcnMiLCJmZXRjaFR2VHJhaWxlciIsImZldGNoVHZSZXZpZXdzIiwiZHJhd1NlY3Rpb24iLCJtZWRpYSIsInNlY3Rpb24iLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJkZXRhaWxzIiwiZ2V0SW5mbyIsInByb3ZpZGVycyIsImFkZFRvU2VjdGlvbiIsInBhcnQiLCJhcHBlbmRDaGlsZCIsInJlbmRlckVsZW1lbnQiLCJ0YWciLCJjbGFzc05hbWUiLCJjb250YWluZXIiLCJjbGFzc0xpc3QiLCJhZGQiLCJtb3ZpZUZuYyIsInR2Rm5jIiwiZHJhd0ludHJvIiwiaW1nU2l6ZSIsImludHJvQ29udGFpbmVyIiwidGl0bGUiLCJ0ZXh0Q29udGVudCIsImNyZWF0ZVRpdGxlIiwidGFnUGFyYSIsIndyaXRlVGFnbGluZSIsImltZyIsInBvc3RlciIsImJhc2VJbWdVcmwiLCJpbWdfcGF0aCIsInNyYyIsImFsdCIsInNldEF0dHJpYnV0ZSIsInJlbmRlckltZyIsImRyYXdBbGwiLCJkcmF3U3ViSW5mb3MiLCJkYXRlIiwibGFzdEFpcmVkIiwiY3JlYXRlU3ViSW5mbyIsInNwbGl0IiwicmV2ZXJzZSIsImpvaW4iLCJtaW5zIiwiaG91cnMiLCJySG91cnMiLCJNYXRoIiwiZmxvb3IiLCJtaW51dGVzIiwicm91bmQiLCJjb252ZXJ0TWluVG9IciIsImNhdGVnb3J5IiwiaW5mbyIsInN1YkluZm8iLCJjYXRlZ29yeU5hbWUiLCJjYXRlZ29yeUluZm8iLCJkcmF3U3VtbWFyeSIsInBhcmEiLCJkcmF3UHJvdmlkZXJzIiwiYXZhaWxQcm92aWRlcnMiLCJwcm92aWRlckNvbnRhaW5lciIsImNvdW50cnlCdG4iLCJob3VzZUNvbnRhaW5lciIsImVsZW0iLCJPYmplY3QiLCJrZXlzIiwiaW5jbHVkZXMiLCJkcmF3UHJvdmlkZXIiLCJmaXJzdFByb3ZpZGVyIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJwcmV2ZW50RGVmYXVsdCIsImN1cnJDb3VudHJ5TmFtZSIsInByb3ZpZGVyQ291bnRyaWVzIiwiY3VyckNvdW50cnlDb2RlIiwiY291bnRyaWVzIiwibW9kYWxDb250YWluZXIiLCJtb2RhbEhlYWRlciIsIm1vZGFsQm9keSIsIm1vZGFsQ3VycmVudENvdW50cnkiLCJtb2RhbElucHV0U2VhcmNoIiwibW9kYWxMaXN0Q291bnRyaWVzIiwibW9kYWxDbG9zZUJ0biIsInJlbmRlckNvdW50cnlGbGFnIiwiY291bnRyeU5hbWUiLCJmbGFnIiwiZmlsdGVyUmVzdWx0cyIsImlucHV0IiwidWwiLCJsaSIsImEiLCJpIiwidHh0VmFsdWUiLCJnZXRFbGVtZW50QnlJZCIsInZhbHVlIiwidG9VcHBlckNhc2UiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsImlubmVyVGV4dCIsImluZGV4T2YiLCJzdHlsZSIsImRpc3BsYXkiLCJoZWFkaW5nIiwiY3VyckNvdW50cnkiLCJzZWFyY2hMYWJlbCIsInNlYXJjaEF0dHJpYnV0ZXMiLCJwbGFjZWhvbGRlciIsInJvbGUiLCJjdXJyQ291bnRyeUZsYWciLCJodG1sRm9yIiwiZm9ybUVsZW0iLCJyZW5kZXJIZWFkaW5nIiwiY291bnRyeUNvbnRhaW5lciIsImNvdW50cnlGbGFnIiwiY291bnRyeUVsZW0iLCJyZW5kZXJCb2R5IiwiY2xvc2VGbmMiLCJjbG9zZVN5bWIiLCJyZW5kZXJDbG9zZUJ0biIsInF1ZXJ5U2VsZWN0b3IiLCJyZW1vdmUiLCJtb2RhbEVsZW0iLCJhcHBlbmQiLCJyZW5kZXJDb3VudHJpZXNNb2RhbCIsImJhY2tncm91bmRDb2xvciIsInRyYW5zZm9ybSIsInRpY2tJY29uIiwiaGlnaGxpZ2h0Q3VyckNvdW50cnkiLCJxdWVyeVNlbGVjdG9yQWxsIiwibGFzdENoaWxkIiwic2VsZWN0ZWRDb3VudHJ5IiwiaW5uZXJIVE1MIiwic3RyZWFtSW5mbyIsImJ1eUluZm8iLCJyZW50SW5mbyIsInNlcnZpY2VOYW1lcyIsImlkeCIsInNlcnZpY2VDb250YWluZXIiLCJzZXJ2aWNlTmFtZSIsInNlcnZpY2VOYW1lQm9sZCIsInByb3ZpZGVyU2VydmljZUNvbnRhaW5lciIsInByb3ZpZGVyIiwicHJvdmlkZXJTZXJ2aWNlIiwicHJvdmlkZXJJbWciLCJwcm92aWRlck5hbWUiLCJkcmF3UmV2aWV3cyIsInJldmlld0NvbnRhaW5lciIsImFkZFJldkluZm8iLCJpbmZvQ29udGFpbmVyIiwicmV2aWV3SGVhZGluZyIsImF1dGhvclBpYyIsInJlbmRlclJldmlld0hlYWRpbmciLCJyZXZpZXdDb250ZW50IiwicmVuZGVyUmV2aWV3Qm9keSIsInJldmlld0Zvb3RlciIsInJldmlld1VybCIsInJldmlld1VwZGF0ZWQiLCJjb25jYXQiLCJyZW5kZXJSZXZpZXdGb290ZXIiLCJkcmF3UmV2aWV3IiwiZHJhd1NlY3Rpb25zIiwiaWRzIiwicXVlcnkiLCJpbnRlcnByZXRUb1F1ZXJ5IiwicmVzdWx0Iiwic29ydCIsInAxIiwicDIiLCJtZWRpYV90eXBlIiwiZmV0Y2hJZHMiLCJtYWluIiwic2VjdGlvbnMiLCJyZW5kZXJTZWN0aW9uIiwiYWRkU3VibWl0U2VhcmNoRm5jIl0sInNvdXJjZVJvb3QiOiIifQ==